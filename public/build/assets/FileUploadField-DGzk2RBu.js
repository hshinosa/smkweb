import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{r as a}from"./inertia-vendor-CFsdYvsV.js";import{I as G}from"./InputLabel-B7Cy73bq.js";import{I as x,X as M,V as T,u as U}from"./ui-vendor-DKvpuSCb.js";function O({id:i,label:f,onChange:o,previewUrl:h,error:b,description:y,accept:l="image/*",fileType:w="image",multiple:n=!1}){const[k,c]=a.useState(!1),[r,d]=a.useState(null),[F,p]=a.useState(null),[D,m]=a.useState(!1),[g,v]=a.useState(0);a.useEffect(()=>(m(!1),()=>{r&&r.startsWith("blob:")&&URL.revokeObjectURL(r)}),[r,h]);const I=s=>{s.preventDefault(),c(!0)},P=()=>{c(!1)},E=s=>{if(s.preventDefault(),c(!1),s.dataTransfer.files&&s.dataTransfer.files.length>0)if(n){const t=Array.from(s.dataTransfer.files);v(t.length),d(null),o(t)}else{const t=s.dataTransfer.files[0];j(t)}},L=s=>{if(s.target.files&&s.target.files.length>0)if(n){const t=Array.from(s.target.files);v(t.length),d(null),o(t)}else{const t=s.target.files[0];j(t)}},j=s=>{const t=URL.createObjectURL(s);d(t),p(s.type.startsWith("video/")?"video":"image"),o(s)},S=s=>{s.preventDefault(),s.stopPropagation(),d(null),p(null),o(null);const t=document.getElementById(i);t&&(t.value="")},u=r||h,N=F||w;return e.jsxs("div",{className:`bg-slate-50 p-5 rounded-2xl border-2 border-dashed transition-all duration-200 ${k?"border-primary bg-blue-50 scale-[1.01] shadow-md":"border-slate-200 hover:border-primary/50"}`,onDragOver:I,onDragLeave:P,onDrop:E,children:[e.jsx(G,{htmlFor:i,value:f,className:"mb-3 text-slate-700 font-bold text-base"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 items-start",children:[n?g>0?e.jsxs("div",{className:"w-40 h-40 bg-blue-50 rounded-xl flex flex-col items-center justify-center text-primary border-2 border-blue-200 shrink-0",children:[e.jsx(x,{size:32,className:"mb-2"}),e.jsxs("span",{className:"text-sm font-bold",children:[g," File Dipilih"]})]}):e.jsxs("div",{className:"w-40 h-40 bg-slate-200 rounded-xl flex flex-col items-center justify-center text-slate-400 border-2 border-slate-300 border-dashed shrink-0",children:[e.jsx(x,{size:32,className:"mb-2 opacity-50"}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold",children:"Multiple Files"})]}):u&&!D?e.jsxs("div",{className:"relative group shrink-0",children:[N==="video"?e.jsx("video",{src:u,className:"w-40 h-40 object-cover rounded-xl shadow-md ring-4 ring-white bg-black",muted:!0,playsInline:!0,onError:()=>m(!0)}):e.jsx("img",{src:u,alt:`Preview ${f}`,className:"w-40 h-40 object-cover rounded-xl shadow-md ring-4 ring-white",onError:()=>m(!0)}),e.jsx("div",{className:"absolute inset-0 bg-black/40 rounded-xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white text-xs font-medium",children:r?"Preview Baru":N==="video"?"Video Saat Ini":"Gambar Saat Ini"}),r&&e.jsx("button",{onClick:S,className:"absolute -top-2 -right-2 bg-red-500 text-white p-1 rounded-full shadow-lg hover:bg-red-600 transition-colors",title:"Batalkan pilihan",children:e.jsx(M,{size:14})})]}):e.jsxs("div",{className:"w-40 h-40 bg-slate-200 rounded-xl flex flex-col items-center justify-center text-slate-400 border-2 border-slate-300 border-dashed shrink-0",children:[l.includes("video")?e.jsx(T,{size:32,className:"mb-2 opacity-50"}):e.jsx(x,{size:32,className:"mb-2 opacity-50"}),e.jsx("span",{className:"text-[10px] uppercase tracking-wider font-bold",children:l.includes("video")?"No Video":"No Image"})]}),e.jsxs("div",{className:"flex-1 pt-2",children:[e.jsxs("label",{htmlFor:i,className:"inline-flex items-center px-5 py-2.5 bg-white border border-slate-300 rounded-xl font-bold text-xs text-slate-700 uppercase tracking-widest shadow-sm hover:bg-slate-50 hover:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all cursor-pointer",children:[e.jsx(U,{size:16,className:"mr-2 text-primary"}),l.includes("video")?"Pilih atau Drag Video":"Pilih atau Drag Gambar"]}),e.jsx("input",{id:i,type:"file",accept:l,multiple:n,className:"hidden",onChange:L}),e.jsx("p",{className:"mt-4 text-sm text-slate-500 leading-relaxed",children:y||(l.includes("video")?"Format: MP4, WebM. Maksimal 50MB.":"Format: JPEG, PNG, JPG, GIF, SVG. Maksimal 10MB. Bisa drag & drop file ke sini.")}),b&&e.jsx("div",{className:"mt-3 p-2 bg-red-50 border border-red-100 rounded-lg",children:e.jsx("p",{className:"text-xs text-red-600 font-medium",children:b})})]})]})]})}export{O as F};
