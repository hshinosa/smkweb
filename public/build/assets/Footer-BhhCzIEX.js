import{j as e,M as je,r as ve,a as Ne}from"./markdown-vendor-CIGiOj7E.js";import{q as te,r as l,f as Se,a as Me,J as d}from"./inertia-vendor-CFsdYvsV.js";import{T as F}from"./typography-ChUjANkt.js";import{aT as ee,T as Ae,X as ae,aU as Pe,aV as Ie,aW as Ce,aO as _e,aQ as $e,aP as Ee,aX as Le,h as W,a as oe,s as de,aK as Te,W as Be,w as ze,aY as De,k as Re}from"./ui-vendor-DKvpuSCb.js";const v=(N,h={})=>{console.log(`[ChatWidget] ${N}`,h)};function Oe(){const N=te();if(!N)return null;const{siteSettings:h}=N.props;h?.general?.site_name;const[g,I]=l.useState(()=>((h?.general||{}).whatsapp||"+6281234567890").replace("+","")),[x,b]=l.useState(!1),[A,w]=l.useState(!1),[T,C]=l.useState(!1),[k,$]=l.useState(0),[c,S]=l.useState(""),[M,m]=l.useState(!1),[y,R]=l.useState(null),[O,P]=l.useState(!0),[B,J]=l.useState(!1),[z,E]=l.useState(!1),[Y,V]=l.useState(null),[D,a]=l.useState(0),o=3,[me,X]=l.useState(["Info PPDB?","Program studi?","Ekstrakurikuler?","Lokasi sekolah?"]),se=l.useRef(null),re=l.useRef(!1);l.useEffect(()=>{if(k>0){const t=setTimeout(()=>$(k-1),1e3);return()=>clearTimeout(t)}},[k]),l.useEffect(()=>{if(re.current)return;const t=()=>{const s="chat_session_lock";try{const i=localStorage.getItem(s);if(i){const j=parseInt(i);if(Date.now()-j<5e3){setTimeout(t,100);return}}localStorage.setItem(s,Date.now().toString());let n=localStorage.getItem("chat_session_id");if(!n){const j=Date.now(),f=Math.random().toString(36).substr(2,12),_=navigator.userAgent.split("").reduce((u,H)=>(u=(u<<5)-u+H.charCodeAt(0),u&u),0);n=`session_${j}_${f}_${Math.abs(_)}`,localStorage.setItem("chat_session_id",n)}if(!/^session_\d+_[a-z0-9]+_\d+$/.test(n)){console.warn("Invalid session ID format, regenerating..."),localStorage.removeItem("chat_session_id"),t();return}R(n),re.current=!0,localStorage.removeItem(s)}catch(i){console.error("Session initialization error:",i),localStorage.removeItem(s)}};t()},[]);const ue=async()=>{if(!(!y||z||B)){J(!0);try{const t=ne(),s=await Me.get("/api/chat/history",{params:{session_id:y,limit:20},headers:{"X-CSRF-TOKEN":t}});if(s.data.success&&s.data.history.length>0){const r=s.data.history.map(i=>({id:`history_${i.id}`,sender:i.sender,text:i.message,isRagEnhanced:i.is_rag_enhanced,timestamp:i.timestamp}));q([{id:1,sender:"bot",text:"Halo lagi! üëã Aku AI SMANSA~ Ini percakapan kita sebelumnya ya ‚ú®",isRagEnhanced:!1},...r]),P(!1)}E(!0)}catch(t){console.error("Failed to load chat history:",t),E(!0)}finally{J(!1)}}};l.useEffect(()=>{x&&y&&!z&&ue()},[x,y]);const[U,q]=l.useState([{id:1,sender:"bot",text:"Halo! üëã Aku **AI SMANSA**, teman virtualmu buat ngobrolin SMAN 1 Baleendah! ‚ú®",isRagEnhanced:!1},{id:2,sender:"bot",text:"Mau tanya apa nih tentang SMANSA? PPDB, jurusan, ekskul, atau yang lain? Yuk, tanya aja~ üòä",isRagEnhanced:!1}]);l.useEffect(()=>{U.length},[U.length]),l.useEffect(()=>{const t=()=>{const r=window.location.pathname;m(r.startsWith("/admin")||r.startsWith("/login"))};t();const s=Se.on("finish",t);return()=>{s()}},[]);const he=()=>{se.current?.scrollIntoView({behavior:"smooth"})};if(l.useEffect(()=>{M||he()},[U,x,A,M]),M)return null;const ne=()=>document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||"",Q=async t=>{const s=Date.now();return v("========== NEW MESSAGE REQUEST =========="),v("Sending message to API",{userMessage:t.substring(0,50),sessionId:y,timestamp:new Date().toISOString()}),new Promise(async(r,i)=>{try{const n="bot_"+Date.now();w(!1),L("","bot",!1,n);let j="",f=!1;const _=ne();v("Making fetch request",{url:"/api/chat/send",csrfToken:_?"present":"missing",sessionId:y});const u=await fetch("/api/chat/send",{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/event-stream","X-CSRF-TOKEN":_},body:JSON.stringify({message:t,session_id:y,stream:!0})});if(v("Fetch response received",{status:u.status,statusText:u.statusText,ok:u.ok,contentType:u.headers.get("content-type")}),!u.ok){const G=await u.text();throw v("Response not OK",{status:u.status,errorText:G.substring(0,200)}),new Error(`HTTP ${u.status}: ${G.substring(0,100)}`)}const H=u.body.getReader(),be=new TextDecoder;let le=0;for(;;){const{value:G,done:ke}=await H.read();if(ke){v("Stream completed",{totalChunks:le,totalLength:j.length,elapsedMs:Date.now()-s});break}const ye=be.decode(G);le++;const we=ye.split(`
`);for(const Z of we)if(Z.startsWith("data: "))try{const p=JSON.parse(Z.slice(6));if(p.type==="metadata")C(!1),f=p.is_rag_enhanced,v("Metadata received",{isRagEnhanced:f,sessionId:p.session_id});else if(p.type==="content")C(!1),j+=p.content,K(n,j,f);else if(p.type==="done"){v("Done event received",{messageLength:p.full_message?.length,elapsedMs:Date.now()-s}),K(n,p.full_message,f),p.site_settings?.general?.whatsapp&&I(p.site_settings.general.whatsapp.replace("+","")),r({text:p.full_message,isRagEnhanced:f});return}else p.type==="error"&&(v("Error event received",{message:p.message}),K(n,`‚ùå ${p.message}`,!1))}catch(p){v("Error parsing SSE data",{error:p.message,line:Z.substring(0,100)})}}r({text:j,isRagEnhanced:f})}catch(n){const j=Date.now()-s;v("========== CHAT ERROR =========="),v("Chat streaming error",{error:n.message,name:n.name,elapsedMs:j,stack:n.stack?.substring(0,300)}),console.error("Chat streaming error:",n),w(!1);let f="Maaf, terjadi kesalahan saat memproses pesan Anda.",_=!1;if(n.name==="AbortError"||n.message.includes("timeout")?(f="Koneksi timeout. Server memerlukan waktu terlalu lama untuk merespons.",_=!0):n.message.includes("Failed to fetch")||n.message.includes("NetworkError")?(f="Gagal terhubung ke server. Periksa koneksi internet Anda.",_=!0):n.message.includes("419")?f="Sesi Anda telah berakhir. Silakan refresh halaman.":n.message.includes("429")&&(f="Terlalu banyak permintaan. Mohon tunggu sebentar.",$(60)),K(botMessageId,`‚ùå ${f}`,!1),V(f),_&&D<o){const u=Math.pow(2,D)*1e3;setTimeout(()=>{a(H=>H+1),K(botMessageId,`üîÑ Mencoba kembali (${D+1}/${o})...`,!1),Q(t).then(r).catch(i)},u)}else a(0),i(n)}})},ie=t=>{const s=t.toLowerCase(),r={ppdb:["Syarat pendaftaran?","Jadwal PPDB?","Cara daftar online?","Jalur zonasi?"],program:["Peminatan IPA?","Peminatan IPS?","Peminatan Bahasa?","Mata pelajaran?"],ekstra:["Jadwal ekskul?","Cara daftar ekskul?","Prestasi ekskul?","Biaya ekskul?"],lokasi:["Jam operasional?","Akses transportasi?","Kontak sekolah?","Fasilitas sekolah?"],fasilitas:["Lab komputer?","Perpustakaan?","Lapangan olahraga?","Ruang kelas?"],prestasi:["Prestasi akademik?","Prestasi non-akademik?","Alumni berprestasi?","Lomba yang diikuti?"],guru:["Jumlah guru?","Kualifikasi guru?","Guru bimbingan?","Staff sekolah?"]};for(const[i,n]of Object.entries(r))if(s.includes(i)||s.includes(i.replace("ekstra","ekstrakurikuler"))||s.includes("peminatan")&&i==="program"||s.includes("jurusan")&&i==="program")return n;return["Info PPDB?","Program studi?","Ekstrakurikuler?","Lokasi sekolah?"]},xe=()=>{const t=g,s=encodeURIComponent("Halo, saya butuh bantuan informasi sekolah.");window.open(`https://wa.me/${t}?text=${s}`,"_blank")},pe=async t=>{if(t.preventDefault(),!c.trim()||A)return;const s=c.trim().toLowerCase();if(["ke wa","chat wa","whatsapp","kontak via wa","hubungi via wa","admin wa"].some(i=>s.includes(i))){L(c.trim(),"user"),w(!0),setTimeout(()=>{w(!1),L(`Baik, saya akan arahkankan Anda langsung ke admin sekolah via WhatsApp.

Silakan klik tombol di bawah ini untuk langsung chat:`,"bot",!1,"wa-"+Date.now()),X(["Info PPDB?","Biaya sekolah?"]),P(!1)},500),S("");return}L(c.trim(),"user"),S(""),P(!1),w(!0),C(!0);try{const i=await Q(c.trim());if(i&&i.text){const n=ie(i.text);X(n),P(!0)}}catch(i){console.error("Send message error:",i),w(!1),L("Maaf, saya sedang mengalami masalah koneksi. Silakan coba beberapa saat lagi.","bot",!1)}},ge=t=>{S(t),P(!1),L(t,"user"),w(!0),Q(t).then(s=>{if(s&&s.text){const r=ie(s.text);X(r),P(!0)}}).catch(s=>{console.error("Send message error:",s),w(!1),L("Maaf, saya sedang mengalami masalah koneksi. Silakan coba beberapa saat lagi.","bot",!1)})},L=(t,s,r=!1,i=null)=>{q(n=>[...n,{id:i?String(i):"msg_"+Date.now(),sender:s,text:t,isRagEnhanced:r,timestamp:new Date().toISOString()}])},K=(t,s,r=!1)=>{q(i=>i.map(n=>n.id===t?{...n,text:s,isRagEnhanced:r}:n))},fe=()=>{q([{id:1,sender:"bot",text:"Halo! üëã Aku **AI SMANSA**, teman virtualmu buat ngobrolin SMAN 1 Baleendah! ‚ú®",isRagEnhanced:!1},{id:2,sender:"bot",text:"Mau tanya apa nih tentang SMANSA? PPDB, jurusan, ekskul, atau yang lain? Yuk, tanya aja~ üòä",isRagEnhanced:!1}]),P(!0),E(!0);const t=Date.now(),s=Math.random().toString(36).substr(2,12),r=navigator.userAgent.split("").reduce((n,j)=>(n=(n<<5)-n+j.charCodeAt(0),n&n),0),i=`session_${t}_${s}_${Math.abs(r)}`;localStorage.setItem("chat_session_id",i),R(i)};return e.jsxs("div",{className:"fixed bottom-6 right-6 z-[9999] flex flex-col items-end gap-4 font-sans",children:[x&&e.jsxs("div",{className:"w-[420px] h-[600px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden animate-fade-in-up origin-bottom-right",children:[e.jsxs("div",{className:"bg-primary p-4 flex items-center justify-between shadow-md",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center border border-white/20",children:e.jsx(ee,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-sm",children:"AI Assistant"}),e.jsx("span",{className:"text-blue-100 text-xs",children:"AI SMANSA"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:fe,className:"text-white/80 hover:text-white hover:bg-white/10 p-1 rounded-full transition-colors",title:"Mulai percakapan baru",children:e.jsx(Ae,{size:18})}),e.jsx("button",{onClick:()=>b(!1),className:"text-white/80 hover:text-white hover:bg-white/10 p-1 rounded-full transition-colors",children:e.jsx(ae,{size:20})})]})]}),e.jsx("div",{className:"flex-1 bg-gray-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"space-y-4",children:[B&&e.jsx("div",{className:"flex justify-center items-center py-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-500 text-sm",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-primary/30 border-t-primary rounded-full animate-spin"}),e.jsx("span",{children:"Memuat percakapan sebelumnya..."})]})}),U.map(t=>e.jsxs("div",{className:`flex ${t.sender==="user"?"justify-end":"justify-start"}`,children:[t.sender==="bot"&&e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center mr-2 flex-shrink-0",children:e.jsx(ee,{size:16,className:"text-primary"})}),e.jsx("div",{className:"max-w-[80%]",children:e.jsxs("div",{className:`p-3 rounded-2xl text-sm leading-relaxed shadow-sm ${t.sender==="user"?"bg-primary text-white rounded-tr-none":"bg-white text-gray-700 rounded-tl-none border border-gray-100"}`,children:[t.sender==="bot"?t.text===""?e.jsxs("div",{className:"flex items-center gap-1.5 py-2 px-1",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary/40 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce"}),e.jsx("span",{className:"text-[10px] text-gray-400 ml-1 font-medium italic",children:"AI sedang mengetik..."})]}):e.jsx(je,{remarkPlugins:[Ne],rehypePlugins:[ve],components:{h1:({node:s,...r})=>e.jsx("h1",{className:"text-lg font-bold mb-2 text-gray-900",...r}),h2:({node:s,...r})=>e.jsx("h2",{className:"text-base font-bold mb-2 text-gray-900",...r}),h3:({node:s,...r})=>e.jsx("h3",{className:"text-sm font-semibold mb-1 text-gray-800",...r}),p:({node:s,...r})=>e.jsx("p",{className:"mb-2 last:mb-0",...r}),ul:({node:s,...r})=>e.jsx("ul",{className:"list-disc list-inside mb-2 space-y-1",...r}),ol:({node:s,...r})=>e.jsx("ol",{className:"list-decimal list-inside mb-2 space-y-1",...r}),li:({node:s,...r})=>e.jsx("li",{className:"ml-2",...r}),a:({node:s,...r})=>e.jsx("a",{className:"text-primary underline hover:text-primary-darker",target:"_blank",rel:"noopener noreferrer",...r}),code:({node:s,inline:r,...i})=>r?e.jsx("code",{className:"bg-gray-100 px-1 py-0.5 rounded text-xs font-mono text-gray-800",...i}):e.jsx("code",{className:"block bg-gray-100 p-2 rounded text-xs font-mono overflow-x-auto mb-2",...i}),strong:({node:s,...r})=>e.jsx("strong",{className:"font-bold text-gray-900",...r}),em:({node:s,...r})=>e.jsx("em",{className:"italic",...r}),blockquote:({node:s,...r})=>e.jsx("blockquote",{className:"border-l-4 border-gray-300 pl-3 italic text-gray-600 mb-2",...r})},children:t.text}):t.text,t.sender==="bot"&&t.id&&String(t.id).startsWith("wa-")&&e.jsxs("button",{onClick:xe,className:"mt-3 w-full bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded-xl flex items-center justify-center gap-2 transition-colors shadow-sm",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.099-.307-.058-.468.075-.643.127-.161.297-.297.466-.466.594-.173.127-.347.223-.644.15-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.099-.307-.058-.468.075-.643.127-.161.297-.297.466-.466.594-.173.127-.347.223-.644.15-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.099-.307-.058-.468.075-.643.127-.161.297-.297.466-.466.594-.173.127-.347.223-.644.15-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.099-.307-.058-.468.075-.643.127-.161.297-.297.466-.466.594-.173.127-.347.223-.644.15-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.099-.307-.058-.468.075-.643.127-.161.297-.297.466-.466.594-.173.127-.347.223-.644.15-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059zm-5.472 8.617c-5.947 0-10.774-4.827-10.774-10.774 0-5.947 4.827-10.774 10.774-10.774 5.947 0 10.774 4.827 10.774 10.774 0 5.947-4.827 10.774-10.774 10.774zm-18.472 0c0-10.188 8.284-18.472 18.472-18.472 10.188 0 18.472 8.284 18.472 18.472 0 10.188-8.284 18.472-18.472 18.472-10.188 0-18.472-8.284-18.472-18.472z"})}),"Chat WhatsApp"]})]})})]},t.id)),A&&e.jsxs("div",{className:"flex justify-start",children:[e.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center mr-2",children:e.jsx(ee,{size:16,className:"text-primary"})}),e.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-2xl rounded-tl-none shadow-sm flex items-center gap-1.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-primary/40 rounded-full animate-bounce [animation-delay:-0.3s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-primary/60 rounded-full animate-bounce [animation-delay:-0.15s]"}),e.jsx("div",{className:"w-1.5 h-1.5 bg-primary rounded-full animate-bounce"}),e.jsx("span",{className:"text-[10px] text-gray-400 ml-1 font-medium italic",children:T?"AI sedang mencari dokumen...":"AI sedang menyiapkan jawaban..."})]})]}),e.jsx("div",{ref:se})]})}),e.jsxs("div",{className:"bg-white border-t border-gray-100",children:[O&&e.jsx("div",{className:"p-3 pb-0",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:me.map((t,s)=>e.jsx("button",{onClick:()=>ge(t),disabled:A,className:"px-3 py-1.5 text-xs font-medium text-primary bg-primary/5 hover:bg-primary/10 border border-primary/20 rounded-full transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t},s))})}),e.jsx("div",{className:"p-3",children:e.jsxs("form",{onSubmit:pe,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:c,onChange:t=>S(t.target.value),placeholder:k>0?`Tunggu ${k} detik...`:"Tanya apa saja...",disabled:A||k>0,className:"flex-1 bg-gray-100 border-0 rounded-full px-4 py-2 text-sm text-gray-900 placeholder:text-gray-500 focus:ring-2 focus:ring-primary focus:bg-white transition-all disabled:opacity-50"}),e.jsx("button",{type:"submit",disabled:!c.trim()||A||k>0,className:"bg-primary text-white p-2 rounded-full hover:bg-primary-darker disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-md",children:e.jsx(Pe,{size:18,className:c.trim()?"ml-0.5":""})})]})})]})]}),e.jsxs("button",{onClick:()=>b(!x),className:`${x?"bg-red-500 rotate-90":"bg-primary hover:bg-primary-darker"} text-white w-14 h-14 rounded-full shadow-2xl flex items-center justify-center transition-all duration-300 transform hover:scale-110 z-[9999]`,children:[x?e.jsx(ae,{size:24}):e.jsx(Ie,{size:28}),!x&&e.jsxs("span",{className:"absolute top-0 right-0 flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500 border-2 border-white"})]})]})]})}function ce(N={}){const h=N.general||{},g=N.social_media||{},I=h.site_name||"SMAN 1 Baleendah";return{logoSman1:h.site_logo||"/images/logo-sman1-baleendah.png",googleMapsEmbedUrl:h.google_maps_embed_url||"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3960.8947!2d107.6298!3d-6.9876!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e68e62c87267923%3A0x7ef8aaa0fcd59ec9!2sSMAN%201%20Baleendah%2C%20Baleendah%2C%20Kabupaten%20Bandung%2C%20Jawa%20Barat!5e0!3m2!1sid!2sid!4v1746550004423!5m2!1sid!2sid",address:h.address||"Jl. R.A.A. Wiranatakoesoemah No.30, Baleendah, Kec. Baleendah, Kabupaten Bandung, Jawa Barat 40375",phone:h.phone||"(022) 5940262",whatsapp:h.whatsapp||"+6281234567890",email:h.email||"info@sman1baleendah.sch.id",profilLinks:[{title:"Profil & Sejarah",href:"/profil-sekolah"},{title:"Visi Misi",href:"/visi-misi"},{title:"Struktur Organisasi",href:"/struktur-organisasi"},{title:"Program Sekolah",href:"/program"},{title:"Galeri",href:"/galeri"},{title:"Guru & Staff",href:"/guru-staff"},{title:"Seragam Sekolah",href:"/seragam"}],akademikLinks:[{title:"Kalender Akademik",href:"/kalender-akademik"},{title:"Kurikulum",href:"/akademik/kurikulum"},{title:"Organisasi & Ekstrakurikuler",href:"/akademik/organisasi-ekstrakurikuler"},{title:"Prestasi Akademik",href:"#",subItems:[{title:"Data Serapan PTN",href:"/akademik/prestasi-akademik/serapan-ptn"},{title:"Hasil TKA",href:"/akademik/prestasi-akademik/hasil-tka"}]}],programStudiLinks:[{title:"MIPA",href:"/akademik/program-studi/mipa"},{title:"IPS",href:"/akademik/program-studi/ips"},{title:"Bahasa",href:"/akademik/program-studi/bahasa"}],socialMediaLinks:[{name:"Instagram",href:g.instagram||"https://www.instagram.com/sman1baleendah",handle:g.instagram?`@${g.instagram.split("/").pop()}`:"@sman1baleendah",icon:Ce},{name:"Facebook",href:g.facebook||"https://www.facebook.com/SMAN1Baleendah",handle:I,icon:_e},{name:"LinkedIn",href:g.linkedin||"https://www.linkedin.com/school/sman-1-baleendah/",handle:I,icon:$e},{name:"X",href:g.twitter||"https://twitter.com/sman1baleendah",handle:g.twitter?`@${g.twitter.split("/").pop()}`:"@sman1baleendah",icon:Ee},{name:"YouTube",href:g.youtube||"https://www.youtube.com/@sman1baleendah",handle:I,icon:Le}]}}function Je({logoSman1:N,profilLinks:h,akademikLinks:g,programStudiLinks:I}){const{siteSettings:x}=te().props,b=ce(x),A=N||b.logoSman1,w=h||b.profilLinks,T=g||b.akademikLinks,C=I||b.programStudiLinks,[k,$]=l.useState(!1),[c,S]=l.useState(null),[M,m]=l.useState(null),[y,R]=l.useState(!1),[O,P]=l.useState(!1),[B,J]=l.useState(!1),z=a=>S(o=>o===a?null:a),E=()=>{S(null),m(null)},Y=a=>m(o=>o===a?null:a),V=()=>{$(a=>{const o=!a;return o||(R(!1),P(!1)),o})},D=a=>o=>{o.key==="Escape"&&E(),(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),z(a))};return e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#main-content",className:"skip-link",children:"Lewati ke konten utama"}),e.jsxs("nav",{className:"bg-white fixed w-full z-50 shadow-navbar font-sans",role:"navigation","aria-label":"Navigasi utama",children:[e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-24",children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-4",children:[e.jsx(d,{href:"/",children:e.jsx("img",{className:"h-14 w-auto",src:A,alt:`Logo ${x?.general?.site_name||"SMAN 1 Baleendah"}`})}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx(d,{href:"/",className:"text-2xl font-bold text-gray-900 block leading-tight font-serif tracking-tight",children:x?.general?.site_name||"SMA Negeri 1 Baleendah"}),e.jsx("p",{className:"text-base text-primary font-medium italic mt-0.5 font-sans",children:"Unggul dalam Prestasi, Berkarakter Mulia"})]})]}),e.jsxs("div",{className:"hidden lg:ml-8 lg:flex lg:space-x-8 items-center",children:[e.jsxs("div",{className:"relative",onMouseEnter:()=>S("profil"),onMouseLeave:E,children:[e.jsxs("button",{className:`${F.navLink} inline-flex items-center focus:outline-none py-2`,"aria-haspopup":"true","aria-expanded":c==="profil","aria-controls":"profil-menu",onClick:()=>z("profil"),onKeyDown:D("profil"),children:[e.jsx("span",{children:"Profil"}),e.jsx(W,{size:20,className:"ml-1 text-gray-400 transition-colors"})]}),e.jsx("div",{id:"profil-menu",className:`absolute left-0 mt-2 w-64 rounded-xl shadow-xl bg-white ring-1 ring-black ring-opacity-5 transition-all duration-200 ease-out z-20 transform origin-top-left ${c==="profil"?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-1"}`,role:"menu","aria-orientation":"vertical",children:e.jsx("div",{className:"py-2",children:w.map(a=>e.jsx(d,{href:a.href,className:"block px-6 py-3 text-base text-gray-700 hover:bg-blue-50 hover:text-primary transition-colors font-medium",role:"menuitem",children:a.title},a.title))})})]}),e.jsxs("div",{className:"relative",onMouseEnter:()=>S("akademik"),onMouseLeave:E,children:[e.jsxs("button",{className:`${F.navLink} inline-flex items-center focus:outline-none py-2`,"aria-haspopup":"true","aria-expanded":c==="akademik","aria-controls":"akademik-menu",onClick:()=>z("akademik"),onKeyDown:D("akademik"),children:[e.jsx("span",{children:"Akademik"}),e.jsx(W,{size:20,className:"ml-1 text-gray-400 transition-colors"})]}),e.jsx("div",{id:"akademik-menu",className:`absolute left-0 mt-2 w-72 rounded-xl shadow-xl bg-white ring-1 ring-black ring-opacity-5 transition-all duration-200 ease-out z-20 transform origin-top-left ${c==="akademik"?"opacity-100 visible translate-y-0":"opacity-0 invisible -translate-y-1"}`,role:"menu","aria-orientation":"vertical",children:e.jsxs("div",{className:"py-2",children:[T.map(a=>a.subItems?e.jsxs("div",{className:"relative",onMouseEnter:()=>m(a.title),onMouseLeave:()=>m(null),children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-3 text-base text-gray-700 hover:bg-blue-50 hover:text-primary cursor-pointer font-medium",role:"menuitem","aria-haspopup":"true","aria-expanded":M===a.title,onClick:()=>Y(a.title),children:[e.jsx("span",{children:a.title}),e.jsx(oe,{size:18,className:"text-gray-400"})]}),e.jsx("div",{className:`absolute left-full top-0 ml-1 w-64 rounded-xl shadow-xl bg-white ring-1 ring-black ring-opacity-5 transition-all duration-200 ease-out z-30 transform origin-top-left ${M===a.title?"opacity-100 visible translate-x-0":"opacity-0 invisible -translate-x-1"}`,children:e.jsx("div",{className:"py-2",role:"menu","aria-orientation":"vertical",children:a.subItems.map(o=>e.jsx(d,{href:o.href,className:"block px-6 py-3 text-base text-gray-700 hover:bg-blue-50 hover:text-primary transition-colors font-medium",role:"menuitem",children:o.title},o.title))})})]},a.title):e.jsx(d,{href:a.href,className:"block px-6 py-3 text-base text-gray-700 hover:bg-blue-50 hover:text-primary transition-colors font-medium",role:"menuitem",children:a.title},a.title)),e.jsxs("div",{className:"relative border-t border-gray-100 mt-1 pt-1",onMouseEnter:()=>m("program-studi"),onMouseLeave:()=>m(null),children:[e.jsxs("div",{className:"flex justify-between items-center px-6 py-3 text-base text-gray-700 hover:bg-blue-50 hover:text-primary cursor-pointer font-medium",role:"menuitem","aria-haspopup":"true","aria-expanded":M==="program-studi",onClick:()=>Y("program-studi"),children:[e.jsx("span",{children:"Program Studi"}),e.jsx(oe,{size:18,className:"text-gray-400"})]}),e.jsx("div",{className:`absolute left-full top-0 ml-2 w-64 rounded-xl shadow-xl bg-white ring-1 ring-black ring-opacity-5 transition-all duration-200 ease-out z-30 transform origin-top-left ${M==="program-studi"?"opacity-100 visible translate-x-0":"opacity-0 invisible -translate-x-1"}`,children:e.jsx("div",{className:"py-2",role:"menu","aria-orientation":"vertical",children:C.map(a=>e.jsx(d,{href:a.href,className:"block px-6 py-3 text-base text-gray-700 hover:bg-blue-50 hover:text-primary transition-colors font-medium",role:"menuitem",children:a.title},a.title))})})]})]})})]}),e.jsx(d,{href:"/berita-pengumuman",className:F.navLink,children:"Berita"}),e.jsx(d,{href:"/alumni",className:F.navLink,children:"Alumni"}),e.jsx(d,{href:"/kontak",className:F.navLink,children:"Kontak"}),e.jsxs(d,{href:"/informasi-spmb",className:"bg-accent-yellow text-gray-900 hover:bg-[#EAB308] inline-flex items-center px-6 py-3 border border-transparent text-base font-bold rounded-full shadow-md hover:shadow-lg transition-all",children:[e.jsx(de,{size:20,className:"mr-2"}),"Info PPDB"]})]}),e.jsx("div",{className:"-mr-2 flex items-center lg:hidden",children:e.jsxs("button",{type:"button",onClick:V,className:"bg-white inline-flex items-center justify-center p-3 rounded-md text-gray-400 hover:text-primary hover:bg-gray-100 focus:outline-none transition-colors","aria-controls":"mobile-menu","aria-expanded":k,"aria-label":"Toggle navigasi utama",children:[e.jsx("span",{className:"sr-only",children:"Open main menu"}),k?e.jsx(ae,{className:"block h-8 w-8","aria-hidden":"true"}):e.jsx(Te,{className:"block h-8 w-8","aria-hidden":"true"})]})})]})}),e.jsx("div",{className:`lg:hidden fixed inset-x-0 top-24 bg-white shadow-lg z-40 transition-all duration-300 ease-in-out transform origin-top ${k?"opacity-100 scale-y-100":"opacity-0 scale-y-0 h-0"}`,id:"mobile-menu",children:e.jsxs("div",{className:"px-4 pt-4 pb-6 space-y-2 max-h-[calc(100vh-6rem)] overflow-y-auto",children:[e.jsxs("div",{className:"border-b border-gray-100 pb-2 mb-2",children:[e.jsxs("div",{className:"group",children:[e.jsxs("button",{className:"w-full text-left px-4 py-4 rounded-lg text-lg font-semibold text-gray-800 hover:bg-gray-50 flex justify-between items-center transition-colors",onClick:()=>R(a=>!a),"aria-expanded":y,"aria-controls":"mobile-profil-menu",children:["Profil ",e.jsx(W,{size:22,className:`transition-transform duration-200 ${y?"rotate-180":""}`})]}),e.jsx("div",{id:"mobile-profil-menu",className:`${y?"block":"hidden"} pl-4 space-y-1 bg-gray-50/50 rounded-b-lg mb-2`,children:w.map(a=>e.jsx(d,{href:a.href,className:"block px-4 py-3 rounded-md text-base font-medium text-gray-600 hover:text-primary hover:bg-blue-50 transition-colors",children:a.title},`mobile-${a.title}`))})]}),e.jsxs("div",{className:"group",children:[e.jsxs("button",{className:"w-full text-left px-4 py-4 rounded-lg text-lg font-semibold text-gray-800 hover:bg-gray-50 flex justify-between items-center transition-colors",onClick:()=>P(a=>!a),"aria-expanded":O,"aria-controls":"mobile-akademik-menu",children:["Akademik ",e.jsx(W,{size:22,className:`transition-transform duration-200 ${O?"rotate-180":""}`})]}),e.jsxs("div",{id:"mobile-akademik-menu",className:`${O?"block":"hidden"} pl-4 space-y-1 bg-gray-50/50 rounded-b-lg mb-2`,children:[T.map(a=>a.subItems?e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{className:"w-full text-left px-4 py-3 rounded-md text-base font-medium text-gray-600 hover:text-primary flex justify-between items-center transition-colors",onClick:()=>J(!B),children:[a.title," ",e.jsx(W,{size:18,className:`transition-transform ${B?"rotate-180":""}`})]}),e.jsx("div",{className:`${B?"block":"hidden"} pl-4 space-y-1 bg-white/50 rounded-lg`,children:a.subItems.map(o=>e.jsx(d,{href:o.href,className:"block px-4 py-3 rounded-md text-sm font-medium text-gray-500 hover:text-primary transition-colors",children:o.title},`mobile-sub-${o.title}`))})]},`mobile-${a.title}`):e.jsx(d,{href:a.href,className:"block px-4 py-3 rounded-md text-base font-medium text-gray-600 hover:text-primary hover:bg-blue-50 transition-colors",children:a.title},`mobile-${a.title}`)),e.jsxs("div",{className:"pt-2 border-t border-gray-200/50 mt-1",children:[e.jsx("p",{className:"px-4 py-2 text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Program Studi"}),C.map(a=>e.jsx(d,{href:a.href,className:"block px-4 py-3 rounded-md text-base font-medium text-gray-600 hover:text-primary hover:bg-blue-50 transition-colors",children:a.title},`mobile-pk-${a.title}`))]})]})]})]}),e.jsx(d,{href:"/berita-pengumuman",className:"block px-4 py-4 rounded-lg text-lg font-semibold text-gray-800 hover:bg-gray-50 transition-colors",children:"Berita Pengumuman"}),e.jsx(d,{href:"/alumni",className:"block px-4 py-4 rounded-lg text-lg font-semibold text-gray-800 hover:bg-gray-50 transition-colors",children:"Alumni"}),e.jsx(d,{href:"/kontak",className:"block px-4 py-4 rounded-lg text-lg font-semibold text-gray-800 hover:bg-gray-50 transition-colors",children:"Kontak"}),e.jsx("div",{className:"pt-4 mt-4 border-t border-gray-100",children:e.jsxs(d,{href:"/informasi-spmb",className:"flex items-center justify-center w-full px-4 py-4 bg-accent-yellow text-gray-900 rounded-xl text-lg font-bold shadow-sm hover:bg-[#EAB308] transition-colors",children:[e.jsx(de,{size:24,className:"mr-2"}),"Info PPDB"]})})]})})]})]})}function Ue({logoSman1:N,googleMapsEmbedUrl:h,socialMediaLinks:g,showMap:I=!0}){const{siteSettings:x}=te().props,b=ce(x),A=N||b.logoSman1,w=h||b.googleMapsEmbedUrl,T=g||b.socialMediaLinks,C=b.address,k=b.phone,$=b.email,c=x?.general?.site_name||"SMAN 1 Baleendah",S=[{title:"Profil Sekolah",href:"/profil/sejarah"},{title:"Info PPDB",href:"/informasi-spmb"},{title:"Program Studi",href:"/akademik/program-studi/mipa"},{title:"Berita & Pengumuman",href:"/berita-pengumuman"},{title:"Kontak Kami",href:"/kontak"}],M=x?.footer||{};return e.jsxs("footer",{className:"bg-primary text-white",children:[e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:A,alt:`Logo ${c}`,className:"h-16 w-16 bg-white rounded-full p-1"}),e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-bold leading-tight",children:c})})]}),e.jsx("p",{className:"text-blue-100 text-sm leading-relaxed",children:M.footer_description||"Mewujudkan generasi unggul, berkarakter, dan berwawasan global. Sekolah pilihan terbaik untuk masa depan gemilang."}),e.jsx("div",{className:"flex gap-3 pt-2",children:T.map(m=>{const y=m.icon;return e.jsx("a",{href:m.href,target:"_blank",rel:"noopener noreferrer",className:"w-10 h-10 bg-white/10 rounded-full flex items-center justify-center hover:bg-accent-yellow hover:text-gray-900 transition-all",title:m.name,children:y?e.jsx(y,{size:18}):e.jsx(Be,{size:18})},m.name)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-yellow mb-6",children:"Tautan Cepat"}),e.jsx("ul",{className:"space-y-3",children:S.map(m=>e.jsx("li",{children:e.jsx(d,{href:m.href,className:"text-blue-100 hover:text-white hover:translate-x-1 transition-all inline-block",children:m.title})},m.title))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-yellow mb-6",children:"Hubungi Kami"}),e.jsxs("div",{className:"space-y-4 text-blue-100",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ze,{className:"w-5 h-5 text-accent-yellow mt-1 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:C})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(De,{className:"w-5 h-5 text-accent-yellow flex-shrink-0"}),e.jsx("a",{href:`tel:${k}`,className:"text-sm hover:text-white",children:k})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Re,{className:"w-5 h-5 text-accent-yellow flex-shrink-0"}),e.jsx("a",{href:`mailto:${$}`,className:"text-sm hover:text-white",children:$})]})]})]}),I&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-bold text-accent-yellow mb-6",children:"Lokasi Sekolah"}),e.jsx("div",{className:"w-full h-48 bg-gray-300 rounded-lg overflow-hidden shadow-lg border-2 border-white/20",children:e.jsx("iframe",{src:w,width:"100%",height:"100%",style:{border:0},allowFullScreen:"",loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:`Peta Lokasi ${c}`})})]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-blue-900 text-center text-blue-200 text-sm",children:e.jsx("p",{children:M.copyright_text||`¬© ${new Date().getFullYear()} ${c}. All Rights Reserved.`})})]}),e.jsx(Oe,{})]})}export{Ue as F,Je as N,ce as g};
