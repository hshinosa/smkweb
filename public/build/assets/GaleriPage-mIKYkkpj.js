import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{q as U,r as i,R as k,j as A}from"./inertia-vendor-CFsdYvsV.js";import{g as Y,N as q,F as H}from"./Footer-BhhCzIEX.js";import{n as h}from"./imageUtils-wYQj-GuB.js";import{T as E}from"./typography-ChUjANkt.js";import{S as M,t as $,a as F,X as O,Y as B}from"./ui-vendor-DKvpuSCb.js";import"./react-vendor-X_fu8xpB.js";const K=({item:s})=>{const[o,x]=i.useState(""),[w,n]=i.useState(!1);k.useEffect(()=>{let r="";const m=h(s.url)||"";if(s.type==="photo")s.image&&(s.image.conversions&&s.image.conversions.webp?r=h(s.image.conversions.webp):s.image.original_url&&(r=h(s.image.original_url))),r||(r=m);else if(s.type==="video"){const u=m.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);u?r=`https://img.youtube.com/vi/${u[1]}/maxresdefault.jpg`:r=m}x(r)},[s]);const c=r=>{if(!w){if(console.warn("Image load failed for:",s.title,"Source:",o),o&&o.includes("maxresdefault.jpg")){const m=o.replace("maxresdefault.jpg","hqdefault.jpg");x(m),n(!0);return}x("/images/panen-karya-sman1-baleendah.jpg"),n(!0)}},v=s.type==="video"&&o&&o.includes("img.youtube.com");return s.type==="photo"||v?e.jsx("img",{src:o||"/images/panen-karya-sman1-baleendah.jpg",alt:s.title,className:"w-full h-full object-cover block",loading:"lazy",onError:c,style:{objectPosition:"center"}}):s.type==="video"?(h(s.url)||"").match(/\.(jpeg|jpg|png|gif|webp)$/i)?e.jsx("img",{src:o||"/images/panen-karya-sman1-baleendah.jpg",alt:s.title,className:"w-full h-full object-cover block",loading:"lazy",onError:c,style:{objectPosition:"center"}}):e.jsx("video",{src:`${o}#t=0.1`,className:"w-full h-full object-cover block",muted:!0,playsInline:!0,preload:"auto",onLoadedMetadata:u=>{u.target.currentTime=.1},onError:c,style:{objectPosition:"center"}}):e.jsx("img",{src:"/images/panen-karya-sman1-baleendah.jpg",alt:"Fallback",className:"w-full h-full object-cover block opacity-50",style:{objectPosition:"center"}})};function te({galleries:s=[]}){const{siteSettings:o}=U().props,x=o?.general?.site_name||"SMAN 1 Baleendah",w=o?.general?.hero_image||"/images/hero-bg-sman1baleendah.jpeg",n=Y(o),[c,v]=i.useState("Semua"),[r,m]=i.useState(""),[u,S]=i.useState(!1),[d,N]=i.useState(null),[C,L]=i.useState(0),I=o?.hero_gallery||{},T=t=>h(t),_=i.useMemo(()=>{const t=new Set(s.map(a=>a.category).filter(a=>a&&typeof a=="string"&&a.trim()!==""));return["Semua",...Array.from(t).sort()]},[s]),z=t=>{const a=t.split(" ");if(a.length<=1)return t;const p=a.pop();return e.jsxs(e.Fragment,{children:[a.join(" ")," ",e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300",children:p})]})},[g,b]=i.useState(1),f=8,l=i.useMemo(()=>{let t=s;return c!=="Semua"&&(t=t.filter(a=>a.category===c)),r.trim()&&(t=t.filter(a=>a.title.toLowerCase().includes(r.toLowerCase())||a.description&&a.description.toLowerCase().includes(r.toLowerCase()))),t},[c,r,s]);k.useEffect(()=>{b(1)},[c,r]);const y=Math.ceil(l.length/f),D=l.slice((g-1)*f,g*f),G=(t,a)=>{N(t),L(a),S(!0),document.body.style.overflow="hidden"},P=()=>{S(!1),N(null),document.body.style.overflow="unset"},j=t=>{const a=t==="next"?(C+1)%l.length:(C-1+l.length)%l.length;L(a),N(l[a])};k.useEffect(()=>{if(!u)return;const t=a=>{switch(a.key){case"Escape":P();break;case"ArrowLeft":l.length>1&&j("prev");break;case"ArrowRight":l.length>1&&j("next");break}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[u,l.length]);const R=({item:t,index:a})=>e.jsxs("div",{className:"bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group cursor-pointer",onClick:()=>G(t,a),children:[e.jsxs("div",{className:"relative w-full pb-[56.25%] overflow-hidden bg-gray-200",children:[e.jsx("div",{className:"absolute inset-0 w-full h-full",children:e.jsx(K,{item:t})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),t.type==="video"&&e.jsx("div",{className:"absolute inset-0 m-auto w-12 h-12 flex items-center justify-center bg-white/20 backdrop-blur-sm rounded-full border border-white/50 group-hover:bg-accent-yellow group-hover:border-accent-yellow transition-colors duration-300 z-10",children:e.jsx(B,{className:"w-5 h-5 text-white group-hover:text-white ml-1",fill:"currentColor"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-primary font-bold uppercase tracking-wider text-[10px] bg-blue-50 px-2 py-1 rounded-md",children:t.category||"Umum"}),e.jsx("span",{className:"text-gray-400 text-xs font-medium",children:new Date(t.date||t.created_at).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric"})})]}),e.jsx("h3",{className:"font-bold text-gray-900 mb-1 line-clamp-1 group-hover:text-primary transition-colors text-sm",children:t.title}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 font-sans",children:t.description})]})]});return e.jsxs("div",{className:"bg-secondary min-h-screen font-sans text-gray-800 flex flex-col",children:[e.jsx(A,{title:`Galeri - ${x}`,description:`Galeri kehidupan sekolah ${x}.`}),e.jsx(q,{logoSman1:n.logoSman1,profilLinks:n.profilLinks,akademikLinks:n.akademikLinks,programStudiLinks:n.programStudiLinks}),e.jsxs("main",{id:"main-content",className:"pt-20",tabIndex:"-1",children:["            ",e.jsxs("section",{className:"relative h-[40vh] min-h-[400px] flex items-center justify-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:T(w),alt:"Background Galeri Sekolah",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-black/60"})]}),e.jsxs("div",{className:"relative z-10 container mx-auto px-4 text-center text-white",children:[e.jsx("h1",{className:`${E.heroTitle} mb-4`,children:z(I.title||"Galeri Kegiatan")}),e.jsx("p",{className:`${E.heroText} max-w-2xl mx-auto opacity-90`,children:I.subtitle||"Momen-momen berharga dalam berbagai aktivitas sekolah."})]})]}),e.jsx("section",{className:"py-12 flex-grow",children:e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-center mb-12 gap-6",children:[e.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:_.map(t=>e.jsx("button",{onClick:()=>v(t),className:`px-5 py-2 rounded-full text-xs font-bold transition-all duration-300 ${c===t?"bg-primary text-white shadow-md border-primary":"bg-white text-gray-600 hover:text-primary border border-gray-200 hover:border-primary"}`,children:t},t))}),e.jsxs("div",{className:"relative w-full max-w-xs",children:[e.jsx("input",{type:"text",placeholder:"Cari foto atau video...",value:r,onChange:t=>m(t.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-full border border-gray-200 focus:ring-2 focus:ring-primary focus:border-transparent outline-none shadow-sm text-sm"}),e.jsx(M,{className:"w-4 h-4 text-gray-400 absolute left-3.5 top-1/2 transform -translate-y-1/2"})]})]}),l.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:D.map((t,a)=>{const p=(g-1)*f+a;return e.jsx(R,{item:t,index:p},t.id)})}),y>1&&e.jsxs("div",{className:"flex justify-center items-center mt-12 gap-2",children:[e.jsx("button",{onClick:()=>b(t=>Math.max(t-1,1)),disabled:g===1,className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx($,{className:"w-5 h-5 text-gray-600"})}),Array.from({length:y},(t,a)=>a+1).map(t=>e.jsx("button",{onClick:()=>b(t),className:`w-8 h-8 rounded-full font-bold text-xs transition-all duration-300 ${g===t?"bg-primary text-white shadow-md transform scale-110":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:t},t)),e.jsx("button",{onClick:()=>b(t=>Math.min(t+1,y)),disabled:g===y,className:"p-2 rounded-full border border-gray-200 hover:bg-gray-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:e.jsx(F,{className:"w-5 h-5 text-gray-600"})})]})]}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-block p-4 rounded-full bg-white mb-4 shadow-sm",children:e.jsx(M,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Tidak ada galeri ditemukan"}),e.jsx("p",{className:"text-gray-500",children:"Coba kata kunci lain atau ubah filter kategori."})]})]})})]})," ",e.jsx(H,{logoSman1:n.logoSman1,googleMapsEmbedUrl:n.googleMapsEmbedUrl,socialMediaLinks:n.socialMediaLinks}),u&&d&&e.jsx("div",{className:"fixed inset-0 bg-black/95 z-[60] flex items-center justify-center p-4 backdrop-blur-sm",children:e.jsxs("div",{className:"relative w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsx("button",{onClick:P,className:"absolute -top-12 right-0 text-white/70 hover:text-white transition-colors",children:e.jsx(O,{className:"w-8 h-8"})}),e.jsx("div",{className:"flex-grow flex items-center justify-center bg-black rounded-lg overflow-hidden relative min-h-[400px] md:min-h-[500px]",children:(()=>{const t=h(d.url)||"";if(d.type==="photo"){const p=d.image&&d.image.original_url?h(d.image.original_url):t;return e.jsx("img",{src:p,alt:d.title,className:"max-w-full max-h-[85vh] object-contain"})}const a=t.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return a?e.jsx("div",{className:"w-full h-full flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-5xl",style:{aspectRatio:"16/9"},children:e.jsx("iframe",{src:`https://www.youtube.com/embed/${a[1]}?autoplay=1&modestbranding=1&rel=0`,className:"w-full h-full border-0 rounded-lg shadow-2xl",allowFullScreen:!0,allow:"autoplay; encrypted-media; picture-in-picture"})})}):e.jsx("video",{src:t,controls:!0,className:"max-w-full max-h-[85vh] aspect-video",autoPlay:!0,playsInline:!0,children:"Your browser does not support the video tag."})})()}),e.jsxs("div",{className:"mt-4 text-white text-center",children:[e.jsx("h2",{className:"text-xl font-bold font-serif mb-1",children:d.title}),e.jsx("p",{className:"text-white/70 text-sm",children:d.description})]}),l.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:t=>{t.stopPropagation(),j("prev")},className:"absolute left-0 top-1/2 -translate-y-1/2 -ml-12 p-2 text-white/50 hover:text-white transition-colors",children:e.jsx($,{className:"w-10 h-10"})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),j("next")},className:"absolute right-0 top-1/2 -translate-y-1/2 -mr-12 p-2 text-white/50 hover:text-white transition-colors",children:e.jsx(F,{className:"w-10 h-10"})})]})]})})]})}export{te as default};
