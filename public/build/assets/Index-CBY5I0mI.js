import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{r as c,S as C,f as N}from"./inertia-vendor-CFsdYvsV.js";import{C as O}from"./ContentManagementPage-CS4dHDNy.js";import{M as W}from"./Modal-rJC0U0UH.js";import{T as n}from"./TextInput-DXlIWAoE.js";import{I as l}from"./InputLabel-B7Cy73bq.js";import{I as f}from"./InputError-CW7Z9Fko.js";import{P as d}from"./PrimaryButton-BP4GzKQS.js";import{z as i}from"./app-SCjtbprB.js";import{C as v,an as p,o as B,e as _,H as L,ao as X,m as $,P as D,T as M,X as R}from"./ui-vendor-DKvpuSCb.js";import"./react-vendor-X_fu8xpB.js";import"./AdminLayout-BYuG-4eb.js";import"./transition-CiB-21bZ.js";import"./index-CjLAxSrQ.js";import"./typography-ChUjANkt.js";function de({batches:w,universities:T,stats:u}){const[g,z]=c.useState("batches"),[E,j]=c.useState(!1),[P,k]=c.useState("batch"),[o,m]=c.useState(!1),[S,x]=c.useState(null),a=C({name:"",type:"SNBP",year:new Date().getFullYear(),description:"",is_published:!0}),t=C({name:"",short_name:"",color:"#1E40AF",sort_order:0}),I=[{key:"batches",label:"Batch Penerimaan",description:"Kelola data penerimaan per periode.",icon:v},{key:"universities",label:"Daftar PTN",description:"Kelola master data PTN.",icon:p}],b=(s=null)=>{k("batch"),s?(m(!0),x(s.id),a.setData({name:s.name,type:s.type,year:s.year,description:s.description||"",is_published:s.is_published})):(m(!1),x(null),a.reset()),j(!0)},y=(s=null)=>{k("university"),s?(m(!0),x(s.id),t.setData({name:s.name,short_name:s.short_name||"",color:s.color||"#1E40AF",sort_order:s.sort_order||0})):(m(!1),x(null),t.reset()),j(!0)},r=()=>{j(!1),a.reset(),t.reset()},F=s=>{s.preventDefault(),o?a.put(route("admin.ptn-admissions.batches.update",S),{onSuccess:()=>{r(),i.success("Batch berhasil diperbarui")}}):a.post(route("admin.ptn-admissions.batches.store"),{onSuccess:()=>{r(),i.success("Batch berhasil ditambahkan")}})},U=s=>{s.preventDefault(),o?t.put(route("admin.ptn-admissions.universities.update",S),{onSuccess:()=>{r(),i.success("PTN berhasil diperbarui")}}):t.post(route("admin.ptn-admissions.universities.store"),{onSuccess:()=>{r(),i.success("PTN berhasil ditambahkan")}})},A=s=>{confirm("Hapus batch ini? Semua data penerimaan dalam batch akan ikut terhapus.")&&N.delete(route("admin.ptn-admissions.batches.destroy",s),{preserveScroll:!0,onSuccess:()=>i.success("Batch berhasil dihapus")})},H=s=>{confirm("Hapus PTN ini? PTN yang memiliki data penerimaan tidak bisa dihapus.")&&N.delete(route("admin.ptn-admissions.universities.destroy",s),{preserveScroll:!0,onSuccess:()=>i.success("PTN berhasil dihapus"),onError:()=>i.error("PTN tidak bisa dihapus karena masih memiliki data penerimaan")})};return e.jsxs(O,{headerTitle:"Kelola Serapan PTN",headTitle:"Data Serapan PTN",tabs:I,activeTab:g,setActiveTab:z,noForm:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-100 flex items-center justify-center",children:e.jsx(v,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.total_batches}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Batch"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center",children:e.jsx(B,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.total_admissions}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Siswa Diterima"})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-100 flex items-center justify-center",children:e.jsx(p,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.total_universities}),e.jsx("p",{className:"text-sm text-gray-500",children:"PTN Tujuan"})]})]})]}),g==="batches"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Batch Penerimaan"}),e.jsxs(d,{type:"button",onClick:()=>b(),className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 flex items-center gap-2",children:[e.jsx(_,{size:18}),"Tambah Batch"]})]}),w.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:w.map(s=>e.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("span",{className:`px-2.5 py-0.5 text-xs font-semibold rounded-full ${s.type==="SNBP"?"bg-blue-100 text-blue-700":s.type==="SNBT"?"bg-green-100 text-green-700":"bg-purple-100 text-purple-700"}`,children:s.type}),s.is_published?e.jsxs("span",{className:"flex items-center gap-1 text-xs text-green-600",children:[e.jsx(L,{size:12})," Publik"]}):e.jsxs("span",{className:"flex items-center gap-1 text-xs text-gray-400",children:[e.jsx(X,{size:12})," Draft"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(B,{size:14})," ",s.total_students," siswa"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(p,{size:14})," ",s.summaries?.length||0," PTN"]})]}),s.summaries?.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[s.summaries.slice(0,5).map((h,K)=>e.jsxs("span",{className:"px-2 py-1 text-xs font-medium rounded-lg",style:{backgroundColor:`${h.university_color}15`,color:h.university_color},children:[h.university_name,": ",h.count]},K)),s.summaries.length>5&&e.jsxs("span",{className:"px-2 py-1 text-xs text-gray-500",children:["+",s.summaries.length-5," lainnya"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>N.visit(route("admin.ptn-admissions.batches.show",s.id)),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg",title:"Lihat Detail",children:e.jsx($,{size:18})}),e.jsx("button",{onClick:()=>b(s),className:"p-2 text-accent-yellow hover:bg-accent-yellow/10 rounded-lg",title:"Edit",children:e.jsx(D,{size:18})}),e.jsx("button",{onClick:()=>A(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",title:"Hapus",children:e.jsx(M,{size:18})})]})]})},s.id))}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Belum ada batch penerimaan"}),e.jsx(d,{onClick:()=>b(),className:"!bg-accent-yellow !text-gray-900",children:"Tambah Batch Pertama"})]})]}),g==="universities"&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg",children:"Daftar PTN"}),e.jsxs(d,{type:"button",onClick:()=>y(),className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 flex items-center gap-2",children:[e.jsx(_,{size:18}),"Tambah PTN"]})]}),T.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"PTN"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Warna"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase",children:"Urutan"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:T.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.name}),s.short_name&&e.jsx("p",{className:"text-sm text-gray-500",children:s.short_name})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full border border-gray-200",style:{backgroundColor:s.color}}),e.jsx("span",{className:"text-sm text-gray-600",children:s.color})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:"text-sm text-gray-600",children:s.sort_order})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>y(s),className:"p-2 text-accent-yellow hover:bg-accent-yellow/10 rounded-lg",children:e.jsx(D,{size:16})}),e.jsx("button",{onClick:()=>H(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(M,{size:16})})]})})]},s.id))})]})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"w-8 h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Belum ada PTN terdaftar"}),e.jsx(d,{onClick:()=>y(),className:"!bg-accent-yellow !text-gray-900",children:"Tambah PTN Pertama"})]})]}),e.jsx(W,{show:E,onClose:r,maxWidth:"lg",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full mx-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:P==="batch"?o?"Edit Batch":"Tambah Batch":o?"Edit PTN":"Tambah PTN"}),e.jsx("button",{onClick:r,className:"p-2 text-gray-500 hover:bg-gray-100 rounded-lg",children:e.jsx(R,{size:20})})]}),P==="batch"?e.jsxs("form",{onSubmit:F,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Nama Batch"}),e.jsx(n,{value:a.data.name,onChange:s=>a.setData("name",s.target.value),placeholder:"SNBP 2025",className:"w-full mt-1"}),e.jsx(f,{message:a.errors.name,className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Tipe"}),e.jsxs("select",{value:a.data.type,onChange:s=>a.setData("type",s.target.value),className:"w-full mt-1 border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow focus:ring-accent-yellow",children:[e.jsx("option",{value:"SNBP",children:"SNBP"}),e.jsx("option",{value:"SNBT",children:"SNBT"}),e.jsx("option",{value:"Mandiri",children:"Mandiri"})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Tahun"}),e.jsx(n,{type:"number",value:a.data.year,onChange:s=>a.setData("year",parseInt(s.target.value)),min:"2000",max:"2100",className:"w-full mt-1"}),e.jsx(f,{message:a.errors.year,className:"mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Deskripsi (Opsional)"}),e.jsx("textarea",{value:a.data.description,onChange:s=>a.setData("description",s.target.value),rows:3,className:"w-full mt-1 border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow focus:ring-accent-yellow",placeholder:"Keterangan tambahan..."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_published",checked:a.data.is_published,onChange:s=>a.setData("is_published",s.target.checked),className:"w-4 h-4 text-accent-yellow rounded focus:ring-accent-yellow"}),e.jsx("label",{htmlFor:"is_published",className:"text-sm text-gray-700",children:"Tampilkan di halaman publik"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:"Batal"}),e.jsx(d,{type:"submit",disabled:a.processing,className:"!bg-accent-yellow !text-gray-900",children:a.processing?"Menyimpan...":"Simpan"})]})]}):e.jsxs("form",{onSubmit:U,className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Nama PTN"}),e.jsx(n,{value:t.data.name,onChange:s=>t.setData("name",s.target.value),placeholder:"Universitas Padjadjaran",className:"w-full mt-1"}),e.jsx(f,{message:t.errors.name,className:"mt-1"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{value:"Nama Singkat"}),e.jsx(n,{value:t.data.short_name,onChange:s=>t.setData("short_name",s.target.value),placeholder:"UNPAD",className:"w-full mt-1"})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Warna"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("input",{type:"color",value:t.data.color,onChange:s=>t.setData("color",s.target.value),className:"w-10 h-10 rounded-lg border border-gray-300 cursor-pointer"}),e.jsx(n,{value:t.data.color,onChange:s=>t.setData("color",s.target.value),placeholder:"#1E40AF",className:"flex-1"})]})]})]}),e.jsxs("div",{children:[e.jsx(l,{value:"Urutan"}),e.jsx(n,{type:"number",value:t.data.sort_order,onChange:s=>t.setData("sort_order",parseInt(s.target.value)),className:"w-full mt-1"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg",children:"Batal"}),e.jsx(d,{type:"submit",disabled:t.processing,className:"!bg-accent-yellow !text-gray-900",children:t.processing?"Menyimpan...":"Simpan"})]})]})]})})]})}export{de as default};
