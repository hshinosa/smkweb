import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{q,r,S as H,a as V}from"./inertia-vendor-CFsdYvsV.js";import{T as W}from"./TextInput-DXlIWAoE.js";import{I as w}from"./InputLabel-B7Cy73bq.js";import{I as C}from"./InputError-CW7Z9Fko.js";import{P as f}from"./PrimaryButton-BP4GzKQS.js";import{C as X}from"./ContentManagementPage-CS4dHDNy.js";import{M as Y}from"./Modal-rJC0U0UH.js";import{z as l}from"./app-SCjtbprB.js";import{x as S,G as Z,P as $,T as ee,y as se,h as ae,X as te,e as re}from"./ui-vendor-DKvpuSCb.js";import"./react-vendor-X_fu8xpB.js";import"./typography-ChUjANkt.js";import"./AdminLayout-BYuG-4eb.js";import"./transition-CiB-21bZ.js";import"./index-CjLAxSrQ.js";function fe({faqs:x}){const{success:oe}=q().props,[D,n]=r.useState(!1),[u,v]=r.useState(!1),[I,N]=r.useState(null),[Q,T]=r.useState("list"),[p,P]=r.useState(null),[i,h]=r.useState(x),d=["Umum","Pendaftaran (PPDB)","Akademik","Kesiswaan","Lainnya"];r.useEffect(()=>{h(x)},[x]);const{data:c,setData:o,post:_,put:z,delete:M,processing:k,errors:F,reset:g}=H({question:"",answer:"",category:d[0],is_published:!0,sort_order:0}),E=[{key:"list",label:"Daftar FAQ",description:"Kelola FAQ.",icon:S}],b=(s=null)=>{s?(v(!0),N(s.id),o({question:s.question||"",answer:s.answer||"",category:s.category||d[0],is_published:!!s.is_published,sort_order:s.sort_order||0})):(v(!1),N(null),o({question:"",answer:"",category:d[0],is_published:!0,sort_order:0})),n(!0)},y=()=>{n(!1),g()},O=s=>{s.preventDefault(),u?z(route("admin.faqs.update",I),{onSuccess:()=>{g(),n(!1),l.success("FAQ berhasil diperbarui")}}):_(route("admin.faqs.store"),{onSuccess:()=>{g(),n(!1),l.success("FAQ baru berhasil ditambahkan")}})},B=s=>{confirm("Apakah Anda yakin ingin menghapus FAQ ini? Tindakan ini tidak dapat dibatalkan.")&&M(route("admin.faqs.destroy",s),{preserveScroll:!0,onSuccess:()=>l.success("FAQ berhasil dihapus")})},A=s=>P(p===s?null:s),K=(s,t)=>{s.dataTransfer.setData("index",t)},U=s=>{s.preventDefault()},G=(s,t)=>{const a=parseInt(s.dataTransfer.getData("index"));if(a===t)return;const J=[...i],m=[...i],[L]=m.splice(a,1);m.splice(t,0,L),h(m);const R=m.map(j=>j.id);V.post(route("admin.faqs.reorder"),{items:R}).then(()=>{l.success("Urutan FAQ berhasil disimpan")}).catch(j=>{h(J),l.error("Gagal menyimpan urutan FAQ"),console.error("Reorder error:",j)})};return e.jsxs(X,{headerTitle:"Kelola FAQ",headTitle:"FAQ",tabs:E,activeTab:Q,setActiveTab:T,noForm:!0,customAction:e.jsxs(f,{type:"button",onClick:()=>b(),className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 px-6 py-3 flex items-center gap-2 shadow-sm hover:shadow-md transition-all text-base font-semibold",children:[e.jsx(re,{size:20}),e.jsx("span",{children:"Tambah FAQ"})]}),children:[e.jsx("div",{className:"space-y-3 sm:space-y-4",children:i.length>0?i.map((s,t)=>e.jsxs("div",{className:"bg-white rounded-lg sm:rounded-xl shadow-sm border border-gray-200 overflow-hidden",draggable:!0,onDragStart:a=>K(a,t),onDragOver:U,onDrop:a=>G(a,t),children:[e.jsxs("div",{className:"w-full p-4 sm:p-5 flex items-start gap-4 hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"mt-1 cursor-move text-gray-400 hover:text-gray-600",children:e.jsx(Z,{size:20})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>A(s.id),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider !text-accent-yellow bg-accent-yellow/10 px-2.5 py-1 rounded",children:s.category||"Umum"}),!s.is_published&&e.jsx("span",{className:"text-xs font-bold uppercase tracking-wider text-gray-500 bg-gray-100 px-2.5 py-1 rounded",children:"Draft"})]}),e.jsx("h3",{className:"font-bold text-gray-900 text-sm sm:text-lg pr-4",children:s.question})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[e.jsx("button",{onClick:a=>{a.stopPropagation(),b(s)},className:"p-2 !text-accent-yellow hover:bg-accent-yellow/10 rounded-lg",children:e.jsx($,{size:16})}),e.jsx("button",{onClick:a=>{a.stopPropagation(),B(s.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(ee,{size:16})}),e.jsx("button",{onClick:()=>A(s.id),className:"p-2 text-gray-400 hover:text-gray-600",children:p===s.id?e.jsx(se,{size:20}):e.jsx(ae,{size:20})})]})]}),p===s.id&&e.jsx("div",{className:"px-4 sm:px-5 pb-4 sm:pb-5 border-t border-gray-100 ml-10",children:e.jsxs("div",{className:"pt-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-500 mb-2",children:"Jawaban:"}),e.jsx("div",{className:"text-gray-700 leading-relaxed text-sm sm:text-base pl-3 border-l-2 !border-accent-yellow/20 rounded-r-lg",children:s.answer})]})})]},s.id)):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(S,{size:24,className:"sm:w-8 sm:h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium mb-4 text-sm sm:text-base",children:"Belum ada FAQ"}),e.jsx(f,{onClick:()=>b(),className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 text-sm sm:text-base px-4 py-2",children:"Tambah FAQ"})]})}),e.jsx(Y,{show:D,onClose:y,maxWidth:"2xl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full mx-auto max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900",children:u?"Edit FAQ":"Tambah FAQ"}),e.jsx("button",{onClick:y,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:e.jsx(te,{size:20})})]}),e.jsxs("form",{onSubmit:O,className:"p-4 sm:p-6 space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4",children:e.jsxs("div",{children:[e.jsx(w,{htmlFor:"category",value:"Kategori"}),e.jsx("select",{id:"category",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow focus:ring-accent-yellow text-sm",value:c.category,onChange:s=>o("category",s.target.value),children:d.map(s=>e.jsx("option",{value:s,children:s},s))})]})}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"question",value:"Pertanyaan"}),e.jsx(W,{id:"question",type:"text",className:"mt-1 block w-full",value:c.question,onChange:s=>o("question",s.target.value),required:!0,placeholder:"Pertanyaan..."}),e.jsx(C,{message:F.question,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"answer",value:"Jawaban"}),e.jsx("textarea",{id:"answer",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow text-sm",rows:"5",value:c.answer,onChange:s=>o("answer",s.target.value),required:!0,placeholder:"Jawaban..."}),e.jsx(C,{message:F.answer,className:"mt-2"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_published",checked:c.is_published,onChange:s=>o("is_published",s.target.checked),className:"w-4 h-4 rounded border-gray-300 text-accent-yellow focus:ring-accent-yellow"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Publish"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:y,className:"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium",children:"Batal"}),e.jsx(f,{type:"submit",disabled:k,className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 px-5 py-2",children:k?"...":u?"Simpan":"Tambah"})]})]})]})})]})}export{fe as default};
