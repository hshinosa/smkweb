import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{q as M,r,S as O}from"./inertia-vendor-CFsdYvsV.js";import{T as x}from"./TextInput-DXlIWAoE.js";import{I as n}from"./InputLabel-B7Cy73bq.js";import{I as b}from"./InputError-CW7Z9Fko.js";import{P as y}from"./PrimaryButton-BP4GzKQS.js";import{F as E}from"./FileUploadField-DGzk2RBu.js";import{C as D}from"./ContentManagementPage-CS4dHDNy.js";import{M as G}from"./Modal-rJC0U0UH.js";import{z as o}from"./app-SCjtbprB.js";import{g as W}from"./imageUtils-wYQj-GuB.js";import{am as N,i as w,P as K,T as q,X as A,e as B}from"./ui-vendor-DKvpuSCb.js";import"./react-vendor-X_fu8xpB.js";import"./typography-ChUjANkt.js";import"./AdminLayout-BYuG-4eb.js";import"./transition-CiB-21bZ.js";import"./index-CjLAxSrQ.js";function me({programs:j}){const{success:H}=M().props,[k,c]=r.useState(!1),[u,g]=r.useState(!1),[_,h]=r.useState(null),[P,S]=r.useState("list"),[a,i]=r.useState(null),{data:t,setData:l,post:U,put:F,delete:C,processing:v,errors:d,reset:m}=O({title:"",category:"",description:"",link:"",image:null,image_url:"",sort_order:0,is_featured:!0});r.useEffect(()=>()=>{a&&a.startsWith("blob:")&&URL.revokeObjectURL(a)},[a]),r.useEffect(()=>{if(t.image instanceof File){a&&a.startsWith("blob:")&&URL.revokeObjectURL(a);const s=URL.createObjectURL(t.image);i(s)}else t.image_url?i(t.image_url):i(null)},[t.image,t.image_url]),r.useEffect(()=>()=>{a&&a.startsWith("blob:")&&URL.revokeObjectURL(a)},[a]),r.useEffect(()=>{if(t.image instanceof File){a&&a.startsWith("blob:")&&URL.revokeObjectURL(a);const s=URL.createObjectURL(t.image);i(s)}else t.image_url?i(t.image_url):i(null)},[t.image,t.image_url]);const L=[{key:"list",label:"Program Sekolah",description:"Kelola program unggulan sekolah.",icon:N}],p=(s=null)=>{s?(g(!0),h(s.id),l({title:s.title||"",category:s.category||"",description:s.description||"",link:s.link||"",image:null,image_url:s.image_url||"",sort_order:s.sort_order||0,is_featured:!!s.is_featured})):(g(!1),h(null),m()),c(!0)},f=()=>{c(!1),m()},T=s=>{if(s.preventDefault(),t.image instanceof File){const I=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];if(t.image.size>10485760){o.error("Ukuran gambar maksimal 10MB");return}if(!I.includes(t.image.type)){o.error("Format gambar harus JPG, PNG, GIF, atau WebP");return}}const R=t.image instanceof File;u?F(route("admin.programs.update",_),{forceFormData:R,preserveState:!0,onSuccess:()=>{m(),c(!1),g(!1),h(null),o.success("Program berhasil diperbarui")}}):U(route("admin.programs.store"),{onSuccess:()=>{m(),c(!1),o.success("Program baru berhasil ditambahkan")}})},z=s=>{confirm("Apakah Anda yakin ingin menghapus program ini? Tindakan ini tidak dapat dibatalkan.")&&C(route("admin.programs.destroy",s),{preserveScroll:!0,onSuccess:()=>o.success("Program berhasil dihapus")})};return e.jsxs(D,{headerTitle:"Kelola Program Sekolah",headTitle:"Program Sekolah",tabs:L,activeTab:P,setActiveTab:S,noForm:!0,extraHeader:e.jsx("div",{className:"flex justify-end",children:e.jsxs(y,{type:"button",onClick:()=>p(),className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 flex items-center gap-2 px-4 py-2 text-sm sm:text-base",children:[e.jsx(B,{size:18}),e.jsx("span",{className:"hidden xs:inline",children:"Tambah"})," Program"]})}),children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:j.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Program"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Kategori"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Featured"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:j.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 sm:py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 sm:w-12 sm:h-12 rounded-lg flex items-center justify-center flex-shrink-0 ${s.color_class||"bg-gray-100 text-gray-600"}`,children:s.image_url?e.jsx("img",{src:W(s.image_url),alt:s.title,className:"w-full h-full object-cover rounded-lg"}):e.jsx(w,{size:20,className:"sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm sm:text-base truncate",children:s.title}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mt-0.5 hidden sm:block",children:s.description})]})]})}),e.jsx("td",{className:"px-4 py-3 hidden sm:table-cell",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:s.category})}),e.jsx("td",{className:"px-4 py-3 text-center",children:s.is_featured?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-700",children:[e.jsx(w,{size:12,className:"mr-1"})," Ya"]}):e.jsx("span",{className:"text-gray-300",children:"-"})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>p(s),className:"p-2 !text-accent-yellow hover:bg-accent-yellow/10 rounded-lg transition-colors",children:e.jsx(K,{size:16})}),e.jsx("button",{onClick:()=>z(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(q,{size:16})})]})})]},s.id))})]})}):e.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(N,{size:24,className:"sm:w-8 sm:h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium mb-4 text-sm sm:text-base",children:"Belum ada program"}),e.jsx(y,{onClick:()=>p(),className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 text-sm sm:text-base px-4 py-2",children:"Tambah Program"})]})}),e.jsx(G,{show:k,onClose:f,maxWidth:"2xl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full mx-auto max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900",children:u?"Edit Program":"Tambah Program"}),e.jsx("button",{onClick:f,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(A,{size:20})})]}),e.jsxs("form",{onSubmit:T,className:"p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"title",value:"Judul"}),e.jsx(x,{id:"title",type:"text",className:"mt-1 block w-full",value:t.title,onChange:s=>l("title",s.target.value),required:!0,placeholder:"Nama program..."}),e.jsx(b,{message:d.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"category",value:"Kategori"}),e.jsx(x,{id:"category",type:"text",className:"mt-1 block w-full",value:t.category,onChange:s=>l("category",s.target.value),required:!0,placeholder:"Kategori..."}),e.jsx(b,{message:d.category,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"description",value:"Deskripsi"}),e.jsx("textarea",{id:"description",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow text-sm",rows:"3",value:t.description,onChange:s=>l("description",s.target.value),required:!0}),e.jsx(b,{message:d.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"link",value:"Link Halaman (Opsional)"}),e.jsx(x,{id:"link",type:"text",className:"mt-1 block w-full",value:t.link,onChange:s=>l("link",s.target.value),placeholder:"/akademik/..."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Gambar (Opsional)"}),e.jsx(E,{id:"program_image",label:"Gambar",previewUrl:a||"",onChange:s=>l("image",s),error:d.image})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"sort_order",value:"Urutan"}),e.jsx(x,{id:"sort_order",type:"number",className:"mt-1 block w-full max-w-[100px]",value:t.sort_order,onChange:s=>l("sort_order",parseInt(s.target.value)||0),min:"0"})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_featured",checked:t.is_featured,onChange:s=>l("is_featured",s.target.checked),className:"w-4 h-4 rounded border-gray-300 text-accent-yellow focus:ring-accent-yellow"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Tampilkan di Landing Page"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium",children:"Batal"}),e.jsx(y,{type:"submit",disabled:v,className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 px-5 py-2",children:v?"...":u?"Simpan":"Tambah"})]})]})]})})]})}export{me as default};
