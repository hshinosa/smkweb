import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{r as x,q as E,S as X}from"./inertia-vendor-CFsdYvsV.js";import{T as f}from"./TextInput-DXlIWAoE.js";import{I as c}from"./InputLabel-B7Cy73bq.js";import{I as K}from"./InputError-CW7Z9Fko.js";import{P as I}from"./PrimaryButton-BP4GzKQS.js";import{g as y}from"./imageUtils-wYQj-GuB.js";import{u as Q,X as M,I as V,o as T,p as O,e as F,P as Y,T as Z,v as ee,C as ae,l as se,w as te,U as re}from"./ui-vendor-DKvpuSCb.js";import{C as ie}from"./ContentManagementPage-CS4dHDNy.js";import{M as le}from"./Modal-rJC0U0UH.js";import{z as D}from"./app-SCjtbprB.js";import"./react-vendor-X_fu8xpB.js";import"./typography-ChUjANkt.js";import"./AdminLayout-BYuG-4eb.js";import"./transition-CiB-21bZ.js";import"./index-CjLAxSrQ.js";function A({id:u,label:_,onChange:v,previewUrl:m,error:h,accept:N="image/*"}){const b=x.useRef(null),[k,p]=x.useState(m?y(m):null),[o,j]=x.useState(!1);x.useEffect(()=>{const n=m?y(m):null;console.log(`ðŸ–¼ï¸ ImageUploadCard [${u}]: Processing previewUrl`,{original:m,processed:n,label:_}),p(n)},[m,u,_]);const s=n=>{const d=n.target.files[0];if(d){const g=URL.createObjectURL(d);p(g),v(d)}},r=n=>{n.preventDefault(),j(!1);const d=n.dataTransfer.files[0];if(d){const g=URL.createObjectURL(d);p(g),v(d)}},w=n=>{n.stopPropagation(),p(null),v(null),b.current&&(b.current.value="")};return e.jsxs("div",{className:"w-full",children:[e.jsx(c,{htmlFor:u,value:_,className:"mb-2 block text-sm font-medium text-gray-700"}),e.jsxs("div",{onClick:()=>b.current?.click(),onDragOver:n=>{n.preventDefault(),j(!0)},onDragLeave:()=>j(!1),onDrop:r,className:`
                    relative w-full h-40 min-h-[160px] rounded-xl border-2 border-dashed transition-all cursor-pointer overflow-hidden group bg-white
                    ${o?"border-accent-yellow bg-yellow-50":"border-gray-300 hover:border-accent-yellow hover:bg-gray-50"}
                    ${h?"border-red-500":""}
                `,children:[e.jsx("input",{type:"file",id:u,ref:b,className:"hidden",accept:N,onChange:s}),k?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:k,alt:"Preview",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center text-white",children:[e.jsx(Q,{className:"w-8 h-8 mb-2"}),e.jsx("span",{className:"text-xs font-medium",children:"Ganti Gambar"})]}),e.jsx("button",{onClick:w,className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors z-10 shadow-sm",title:"Hapus gambar",children:e.jsx(M,{size:14})})]}):e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 p-4 text-center",children:[e.jsx(V,{className:"w-8 h-8 mb-2 text-gray-300"}),e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Upload"}),e.jsx("span",{className:"text-[10px] mt-1 text-gray-400",children:"Klik atau Drag"})]})]}),h&&e.jsx("p",{className:"text-xs text-red-500 mt-1",children:h})]})}function Ne({extracurriculars:u}){const{success:_}=E().props,[v,m]=x.useState(!1),[h,N]=x.useState(!1),{activeTab:b}=E().props,[k,p]=x.useState(null),[o,j]=x.useState(()=>new URLSearchParams(window.location.search).get("tab")||b||"organisasi"),{data:s,setData:r,post:w,delete:n,processing:d,errors:g,reset:L}=X({name:"",type:"ekstrakurikuler",category:"Olahraga",description:"",activity_description:"",image:null,image_url:"",bg_image:null,bg_image_url:"",profile_image:null,profile_image_url:"",achievements_data:[],training_info:{days:[],start_time:"",end_time:"",location:"",coach:""},is_active:!0}),z=[{key:"organisasi",label:"Organisasi",description:"Kelola organisasi siswa (OSIS, MPK).",icon:T},{key:"ekstrakurikuler",label:"Ekstrakurikuler",description:"Kelola kegiatan ekstrakurikuler.",icon:O}],B=["Organisasi Siswa"],R=["Olahraga","Seni & Budaya","Akademik & Sains","Keagamaan & Sosial","Kepemimpinan & Bela Negara","Teknologi & Inovasi"],$=a=>a==="organisasi"?B:R,U=x.useMemo(()=>u.filter(a=>a.type===o),[u,o]),P=(a=null)=>{a?(console.log("ðŸ“ Opening edit modal for:",{id:a.id,name:a.name,image_url:a.image_url,bg_image_url:a.bg_image_url,profile_image_url:a.profile_image_url,full_item:a}),N(!0),p(a.id),r({name:a.name||"",type:a.type||"ekstrakurikuler",category:a.category||"Olahraga",description:a.description||"",activity_description:a.activity_description||"",image:null,image_url:a.image_url||"",bg_image:null,bg_image_url:a.bg_image_url||"",profile_image:null,profile_image_url:a.profile_image_url||"",achievements_data:a.achievements_data||[],training_info:a.training_info||{days:[],start_time:"",end_time:"",location:"",coach:""},is_active:!!a.is_active}),console.log("âœ… Form data set:",{image_url:a.image_url||"",bg_image_url:a.bg_image_url||"",profile_image_url:a.profile_image_url||""})):(N(!1),p(null),r({name:"",type:o,category:o==="organisasi"?"Organisasi Siswa":"Olahraga",description:"",activity_description:"",image:null,image_url:"",bg_image:null,bg_image_url:"",profile_image:null,profile_image_url:"",achievements_data:[],training_info:{days:[],start_time:"",end_time:"",location:"",coach:""},is_active:!0})),m(!0)},S=()=>{m(!1),L()},J=a=>{a.preventDefault();const t={forceFormData:!0,preserveScroll:!0,preserveState:!1,onSuccess:l=>{S(),D.success(s.type==="organisasi"?"Organisasi berhasil disimpan":"Ekskul berhasil disimpan")},onError:l=>{console.error("Submission errors:",l),D.error("Gagal menyimpan data. Periksa input Anda.")}};h?(t._method="PUT",w(route("admin.extracurriculars.update",k),t)):w(route("admin.extracurriculars.store"),t)},G=a=>{const t=o==="organisasi"?"organisasi":"ekstrakurikuler";confirm(`Apakah Anda yakin ingin menghapus ${t} ini? Tindakan ini tidak dapat dibatalkan.`)&&n(route("admin.extracurriculars.destroy",a),{preserveScroll:!0,preserveState:!1,onSuccess:()=>D.success(`${t==="organisasi"?"Organisasi":"Ekskul"} berhasil dihapus`)})},q=a=>({Olahraga:"bg-green-50 text-green-600 border border-green-200","Seni & Budaya":"bg-purple-50 text-purple-600 border border-purple-200","Akademik & Sains":"bg-blue-50 text-blue-600 border border-blue-200","Keagamaan & Sosial":"bg-amber-50 text-amber-600 border border-amber-200","Organisasi Siswa":"bg-rose-50 text-rose-600 border border-rose-200","Kepemimpinan & Bela Negara":"bg-orange-50 text-orange-600 border border-orange-200","Teknologi & Inovasi":"bg-cyan-50 text-cyan-600 border border-cyan-200"})[a]||"bg-gray-50 text-gray-600 border border-gray-200",C=()=>o==="organisasi"?"Organisasi":"Ekstrakurikuler",H=()=>o==="organisasi"?T:O;return e.jsxs(ie,{headerTitle:"Kelola Organisasi & Ekskul",headTitle:"Organisasi & Ekstrakurikuler",tabs:z,activeTab:o,setActiveTab:j,noForm:!0,children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-900 text-lg",children:["Daftar ",C()]}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:o==="organisasi"?"OSIS, MPK, dan organisasi siswa lainnya":"PMR, Pramuka, Basket, Paskibra, dan kegiatan lainnya"})]}),e.jsxs(I,{type:"button",onClick:()=>P(),className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 flex items-center gap-2 px-4 py-2 text-sm font-medium w-full sm:w-auto justify-center",children:[e.jsx(F,{size:18}),"Tambah ",C()]})]}),U.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Gambar"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Nama"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase hidden sm:table-cell",children:"Kategori"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:U.map(a=>{const t=H();return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("div",{className:"h-12 w-12 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:a.image_url?e.jsx("img",{src:y(a.image_url),alt:a.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(t,{className:"text-gray-400 w-6 h-6"})})})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:a.name}),a.description&&e.jsx("p",{className:"text-xs text-gray-500 line-clamp-1 mt-0.5 hidden sm:block",children:a.description})]}),e.jsx("td",{className:"px-4 py-3 hidden sm:table-cell",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${q(a.category)}`,children:a.category})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${a.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:a.is_active?"Aktif":"Nonaktif"})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>P(a),className:"p-2 !text-accent-yellow hover:bg-accent-yellow/10 rounded-lg",children:e.jsx(Y,{size:16})}),e.jsx("button",{onClick:()=>G(a.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(Z,{size:16})})]})})]},a.id)})})]})}):e.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:o==="organisasi"?e.jsx(T,{size:24,className:"sm:w-8 sm:h-8 text-gray-400"}):e.jsx(O,{size:24,className:"sm:w-8 sm:h-8 text-gray-400"})}),e.jsxs("p",{className:"text-gray-500 font-medium mb-4 text-sm sm:text-base",children:["Belum ada ",C().toLowerCase()]}),e.jsxs(I,{onClick:()=>P(),className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 text-sm sm:text-base px-4 py-2",children:["Tambah ",C()]})]})]}),e.jsx(le,{show:v,onClose:S,maxWidth:"4xl",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl w-full mx-auto max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200 flex justify-between items-center sticky top-0 bg-white z-10",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900",children:h?`Edit ${s.type==="organisasi"?"Organisasi":"Ekskul"}`:`Tambah ${s.type==="organisasi"?"Organisasi":"Ekskul"}`}),e.jsx("button",{onClick:S,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg",children:e.jsx(M,{size:20})})]}),e.jsxs("form",{onSubmit:J,className:"p-4 sm:p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",value:"Nama"}),e.jsx(f,{id:"name",type:"text",className:"mt-1 block w-full",value:s.name,onChange:a=>r("name",a.target.value),required:!0,placeholder:s.type==="organisasi"?"Contoh: OSIS":"Contoh: Basket"}),e.jsx(K,{message:g.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"category",value:"Kategori"}),e.jsx("select",{id:"category",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow text-sm",value:s.category,onChange:a=>r("category",a.target.value),children:$(s.type).map(a=>e.jsx("option",{value:a,children:a},a))})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",value:"Deskripsi Singkat"}),e.jsx("textarea",{id:"description",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow text-sm",rows:"3",value:s.description,onChange:a=>r("description",a.target.value),required:!0}),e.jsx(K,{message:g.description,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"activity_description",value:"Deskripsi Kegiatan (Detail)"}),e.jsx("textarea",{id:"activity_description",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow text-sm",rows:"4",value:s.activity_description,onChange:a=>r("activity_description",a.target.value),placeholder:"Deskripsi detail tentang kegiatan..."})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx("div",{children:e.jsx(A,{id:"image",label:"Gambar Utama",onChange:a=>r("image",a),previewUrl:y(s.image_url),error:g.image})}),e.jsx("div",{children:e.jsx(A,{id:"bg_image",label:"Background Image",onChange:a=>r("bg_image",a),previewUrl:y(s.bg_image_url),error:g.bg_image})}),e.jsx("div",{children:e.jsx(A,{id:"profile_image",label:"Profile Image (Tampil di Modal Edit/Halaman Publik)",onChange:a=>r("profile_image",a),previewUrl:y(s.profile_image_url),error:g.profile_image})})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(c,{value:"Jejak Prestasi",className:"!mb-0"}),e.jsxs("button",{type:"button",onClick:()=>r("achievements_data",[...s.achievements_data,{title:"",level:"",year:""}]),className:"text-sm flex items-center gap-1 text-accent-yellow hover:text-yellow-600 font-medium",children:[e.jsx(F,{size:16})," Tambah Prestasi"]})]}),s.achievements_data.length>0?e.jsx("div",{className:"space-y-3",children:s.achievements_data.map((a,t)=>e.jsx("div",{className:"bg-white p-3 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ee,{className:"w-4 h-4 text-yellow-500 mt-1 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(f,{type:"text",className:"block w-full text-sm",placeholder:"Judul Prestasi (contoh: Juara 1 Basket Tingkat Kota)",value:a.title,onChange:l=>{const i=[...s.achievements_data];i[t].title=l.target.value,r("achievements_data",i)}}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(f,{type:"text",className:"block w-full text-sm",placeholder:"Tingkat (Kota/Provinsi/Nasional)",value:a.level,onChange:l=>{const i=[...s.achievements_data];i[t].level=l.target.value,r("achievements_data",i)}}),e.jsx(f,{type:"text",className:"block w-full text-sm",placeholder:"Tahun (2024)",value:a.year,onChange:l=>{const i=[...s.achievements_data];i[t].year=l.target.value,r("achievements_data",i)}})]})]}),e.jsx("button",{type:"button",onClick:()=>{const l=s.achievements_data.filter((i,W)=>W!==t);r("achievements_data",l)},className:"text-red-500 hover:text-red-700 p-1",children:e.jsx(M,{size:16})})]})},t))}):e.jsx("p",{className:"text-sm text-gray-500 italic",children:"Belum ada prestasi ditambahkan"})]}),e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsx(c,{value:"Informasi Latihan",className:"mb-3"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-gray-400 mt-2.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(c,{value:"Hari Latihan",className:"text-xs !mb-1"}),e.jsx("div",{className:"mt-2 grid grid-cols-2 sm:grid-cols-4 gap-2",children:["Senin","Selasa","Rabu","Kamis","Jumat","Sabtu","Minggu"].map(a=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg border border-gray-200 hover:border-accent-yellow cursor-pointer transition-colors bg-white",children:[e.jsx("input",{type:"checkbox",checked:s.training_info.days.includes(a),onChange:t=>{const l=t.target.checked?[...s.training_info.days,a]:s.training_info.days.filter(i=>i!==a);r("training_info",{...s.training_info,days:l})},className:"w-4 h-4 rounded border-gray-300 text-accent-yellow focus:ring-accent-yellow"}),e.jsx("span",{className:"text-sm text-gray-700",children:a})]},a))})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(se,{className:"w-4 h-4 text-gray-400 mt-2.5"}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"training_start_time",value:"Jam Mulai",className:"text-xs !mb-1"}),e.jsxs("select",{id:"training_start_time",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow text-sm",value:s.training_info.start_time,onChange:a=>r("training_info",{...s.training_info,start_time:a.target.value}),children:[e.jsx("option",{value:"",children:"Pilih Jam"}),Array.from({length:13},(a,t)=>{const i=`${(6+t).toString().padStart(2,"0")}:00`;return e.jsx("option",{value:i,children:i},i)})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"training_end_time",value:"Jam Selesai",className:"text-xs !mb-1"}),e.jsxs("select",{id:"training_end_time",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow text-sm",value:s.training_info.end_time,onChange:a=>r("training_info",{...s.training_info,end_time:a.target.value}),children:[e.jsx("option",{value:"",children:"Pilih Jam"}),Array.from({length:13},(a,t)=>{const i=`${(6+t).toString().padStart(2,"0")}:00`;return e.jsx("option",{value:i,children:i},i)})]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-gray-400 mt-2.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(c,{htmlFor:"training_location",value:"Lokasi Latihan",className:"text-xs !mb-1"}),e.jsx(f,{id:"training_location",type:"text",className:"block w-full text-sm",placeholder:"Lapangan Basket / Ruang OSIS",value:s.training_info.location,onChange:a=>r("training_info",{...s.training_info,location:a.target.value})})]})]}),e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-gray-400 mt-2.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(c,{htmlFor:"training_coach",value:"Pembina/Pelatih",className:"text-xs !mb-1"}),e.jsx(f,{id:"training_coach",type:"text",className:"block w-full text-sm",placeholder:"Nama pembina atau pelatih",value:s.training_info.coach,onChange:a=>r("training_info",{...s.training_info,coach:a.target.value})})]})]})]})]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"is_active",checked:s.is_active,onChange:a=>r("is_active",a.target.checked),className:"w-4 h-4 rounded border-gray-300 text-accent-yellow focus:ring-accent-yellow"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Aktif"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-gray-700 hover:text-gray-900 font-medium",children:"Batal"}),e.jsx(I,{type:"submit",disabled:d,className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500",children:d?"...":h?"Simpan":"Tambah"})]})]})]})})]})}export{Ne as default};
