import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{r as f,S as A,R as W}from"./inertia-vendor-CFsdYvsV.js";import{C as J}from"./ContentManagementPage-CS4dHDNy.js";import{z as N}from"./app-SCjtbprB.js";import{T as b}from"./TextInput-DXlIWAoE.js";import{I as u}from"./InputLabel-B7Cy73bq.js";import{I as w}from"./InputError-CW7Z9Fko.js";import{P as _}from"./PrimaryButton-BP4GzKQS.js";import{F as O}from"./FileUploadField-DGzk2RBu.js";import{M as L}from"./Modal-rJC0U0UH.js";import{g as R}from"./imageUtils-wYQj-GuB.js";import{o as t,aG as q,X as H,U as P,aw as X,T as $,t as Q,a as V}from"./ui-vendor-DKvpuSCb.js";import"./react-vendor-X_fu8xpB.js";import"./AdminLayout-BYuG-4eb.js";import"./transition-CiB-21bZ.js";import"./typography-ChUjANkt.js";import"./index-CjLAxSrQ.js";function ge({teachers:x,currentSettings:M}){const[c,i]=f.useState("pimpinan"),[p,n]=f.useState(!1),[l,h]=f.useState(!1),[s,m]=f.useState(null),{data:r,setData:o,post:S,delete:C,processing:G,errors:y,reset:g,transform:T}=A({name:"",nip:"",type:"guru",position:"",department:"",email:"",image:null,image_url:""}),j=[{key:"pimpinan",label:"Pimpinan",description:"Kepala Sekolah & Wakasek",icon:t,filter:a=>["Kepala Sekolah","Wakasek"].includes(a.position)},{key:"matematika",label:"Matematika",description:"MGMP Matematika",icon:t,filter:a=>a.department==="Matematika"},{key:"fisika",label:"Fisika",description:"MGMP Fisika",icon:t,filter:a=>a.department==="Fisika"},{key:"kimia",label:"Kimia",description:"MGMP Kimia",icon:t,filter:a=>a.department==="Kimia"},{key:"biologi",label:"Biologi",description:"MGMP Biologi",icon:t,filter:a=>a.department==="Biologi"},{key:"ekonomi",label:"Ekonomi",description:"MGMP Ekonomi",icon:t,filter:a=>a.department==="Ekonomi"},{key:"geografi",label:"Geografi",description:"MGMP Geografi",icon:t,filter:a=>a.department==="Geografi"},{key:"sejarah",label:"Sejarah",description:"MGMP Sejarah",icon:t,filter:a=>a.department==="Sejarah"},{key:"sosiologi",label:"Sosiologi",description:"MGMP Sosiologi",icon:t,filter:a=>a.department==="Sosiologi"},{key:"bahasa-indonesia",label:"Bahasa Indonesia",description:"MGMP Bahasa Indonesia",icon:t,filter:a=>a.department==="Bahasa Indonesia"},{key:"bahasa-inggris",label:"Bahasa Inggris",description:"MGMP Bahasa Inggris",icon:t,filter:a=>a.department==="Bahasa Inggris"},{key:"bahasa-sunda",label:"Bahasa Sunda",description:"MGMP Bahasa Sunda",icon:t,filter:a=>a.department==="Bahasa Sunda"},{key:"bahasa-jepang",label:"Bahasa Jepang",description:"MGMP Bahasa Jepang",icon:t,filter:a=>a.department==="Bahasa Jepang"},{key:"pai",label:"Pendidikan Agama Islam",description:"MGMP PAI",icon:t,filter:a=>["Pendidikan Agama Islam","PAI"].includes(a.department)},{key:"ppkn",label:"Pendidikan Pancasila",description:"MGMP PPKN",icon:t,filter:a=>["Pendidikan Pancasila","PPKN"].includes(a.department)},{key:"bk",label:"Bimbingan Konseling",description:"Guru BK",icon:t,filter:a=>a.department==="Bimbingan Konseling"},{key:"penjasorkes",label:"Penjasorkes",description:"MGMP PJOK",icon:t,filter:a=>["Penjasorkes","PJOK","Pendidikan Jasmani"].includes(a.department)},{key:"pkwu",label:"PKWU",description:"MGMP PKWU",icon:t,filter:a=>["Prakarya dan Kewirausahaan","PKWU","Prakarya"].includes(a.department)},{key:"seni-budaya",label:"Seni Budaya",description:"MGMP Seni Budaya",icon:t,filter:a=>["Seni Budaya","Seni"].includes(a.department)},{key:"staff",label:"Staff & TU",description:"Tenaga Kependidikan",icon:q,filter:a=>a.type==="staff"}],B=(a=null,d="guru")=>{a?(h(!0),m(a.id),o({name:a.name||"",nip:a.nip||"",type:a.type||"guru",position:a.position||"",department:a.department||"",email:a.email||"",image:null,image_url:a.image_url||""})):(h(!1),m(null),g(),o("type",d),o("position",d==="guru"?"Guru":"Staff")),n(!0)},v=()=>{n(!1),g()},F=a=>{a.preventDefault(),l?(T(d=>({...d,_method:"PUT"})),S(route("admin.teachers.update",s),{forceFormData:!0,preserveScroll:!0,onSuccess:()=>{g(),n(!1),h(!1),m(null),N.success("Data guru/staff berhasil diperbarui")}})):(T(d=>d),S(route("admin.teachers.store"),{onSuccess:()=>{g(),n(!1),N.success("Data guru/staff baru berhasil ditambahkan")}}))},I=a=>{confirm("Apakah Anda yakin ingin menghapus data ini?")&&C(route("admin.teachers.destroy",a),{preserveScroll:!0,onSuccess:()=>N.success("Data guru/staff berhasil dihapus")})},K=()=>{const a=j.find(d=>d.key===c);return!a||!a.filter?[]:x.filter(a.filter)},U=()=>{if(!j.find(k=>k.key===c))return null;const d=K(),E=c==="staff";return e.jsx(Y,{teachers:d,onEdit:k=>B(k,E?"staff":"guru"),onDelete:I},c)},D=c==="staff",z=e.jsxs("button",{onClick:()=>B(null,D?"staff":"guru"),className:"flex items-center gap-2 px-4 py-2 !bg-accent-yellow !text-gray-900 rounded-lg hover:!bg-yellow-500 transition-colors text-sm font-bold shadow-sm",children:[e.jsx(P,{size:18}),"Tambah Data"]});return e.jsxs(J,{headerTitle:"Kelola Guru & Staff",headTitle:"Guru & Staff",tabs:j,activeTab:c,setActiveTab:i,noForm:!0,customAction:z,children:[e.jsx("div",{className:"space-y-6",children:U()}),e.jsx(L,{show:p,onClose:v,maxWidth:"7xl",children:e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t-2xl flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-gray-900",children:l?"Edit Data":"Tambah Data Baru"}),e.jsx("p",{className:"text-sm text-gray-500 mt-0.5",children:l?"Perbarui data guru/staff":"Tambahkan data baru"})]}),e.jsx("button",{onClick:v,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-200 rounded-lg transition-colors flex-shrink-0",children:e.jsx(H,{size:20})})]}),e.jsxs("form",{onSubmit:F,className:"overflow-y-auto flex-1",children:[e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"md:col-span-3 space-y-4",children:[e.jsxs("div",{className:"w-full",children:[e.jsx(u,{htmlFor:"image",value:"Foto Profil",className:"mb-2 block font-bold text-gray-700"}),e.jsx(O,{id:"image",onChange:a=>o("image",a),previewUrl:r.image_url,label:"Upload Foto"}),e.jsx(w,{message:y.image,className:"mt-2"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-xl p-4",children:[e.jsxs("h4",{className:"text-xs font-bold text-blue-900 mb-2 flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:"ðŸ’¡"})," Tips"]}),e.jsxs("ul",{className:"text-xs text-blue-800 space-y-1 list-disc list-inside opacity-90",children:[e.jsx("li",{children:"Foto rasio 1:1 (persegi)"}),e.jsx("li",{children:"Format JPG/PNG"})]})]})]}),e.jsxs("div",{className:"md:col-span-5 space-y-5",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 border-b pb-2 flex items-center gap-2",children:[e.jsx(P,{size:16})," Data Pribadi"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",value:"Nama Lengkap"}),e.jsx(b,{id:"name",type:"text",className:"mt-1 block w-full",value:r.name,onChange:a=>o("name",a.target.value),required:!0,placeholder:"Nama lengkap..."}),e.jsx(w,{message:y.name,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"nip",value:"NIP (Opsional)"}),e.jsx(b,{id:"nip",type:"text",className:"mt-1 block w-full",value:r.nip,onChange:a=>o("nip",a.target.value),placeholder:"NIP..."})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"email",value:"Email (Opsional)"}),e.jsx(b,{id:"email",type:"email",className:"mt-1 block w-full",value:r.email,onChange:a=>o("email",a.target.value),placeholder:"Email..."})]})]})]})]}),e.jsxs("div",{className:"md:col-span-4 space-y-5",children:[e.jsxs("h4",{className:"text-sm font-bold text-gray-900 border-b pb-2 flex items-center gap-2",children:[e.jsx(t,{size:16})," Data Kepegawaian"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"type",value:"Tipe"}),e.jsxs("select",{id:"type",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow focus:ring-accent-yellow text-sm",value:r.type,onChange:a=>o("type",a.target.value),children:[e.jsx("option",{value:"guru",children:"Guru"}),e.jsx("option",{value:"staff",children:"Staff"})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"position",value:"Jabatan"}),e.jsxs("select",{id:"position",className:"mt-1 block w-full border-gray-300 rounded-lg shadow-sm focus:border-accent-yellow focus:ring-accent-yellow text-sm",value:r.position,onChange:a=>o("position",a.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Pilih..."}),e.jsx("option",{value:"Kepala Sekolah",children:"Kepala Sekolah"}),e.jsx("option",{value:"Wakasek",children:"Wakasek"}),e.jsx("option",{value:"Guru",children:"Guru"}),e.jsx("option",{value:"Staff",children:"Staff"})]})]})]}),e.jsx(w,{message:y.position}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"department",value:"Unit / Bidang"}),e.jsx(b,{id:"department",type:"text",className:"mt-1 block w-full",value:r.department,onChange:a=>o("department",a.target.value),placeholder:r.position==="Guru"?"Matematika":r.position==="Staff"?"Tata Usaha":"Bidang/Unit"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.position==="Wakasek"?"Bidang Wakasek":r.position==="Guru"?"Mata Pelajaran":"Unit Kerja"})]})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3 p-5 sm:p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{type:"button",onClick:v,className:"px-5 py-2.5 text-gray-700 hover:text-gray-900 font-medium transition-colors order-2 sm:order-1",children:"Batal"}),e.jsx(_,{type:"submit",disabled:G,className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 px-6 py-2.5 font-semibold order-1 sm:order-2",children:G?"Menyimpan...":l?"Simpan Perubahan":"Tambah Data"})]})]})]})})]})}function Y({teachers:x,onEdit:M,onDelete:c}){const[i,p]=W.useState(1),n=7,l=Math.ceil(x.length/n),h=x.slice((i-1)*n,i*n);return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:x.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 sm:px-6 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Foto"}),e.jsx("th",{className:"px-4 py-3 sm:px-6 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Nama"}),e.jsx("th",{className:"px-4 py-3 sm:px-6 text-left text-xs font-semibold text-gray-500 uppercase tracking-wider hidden sm:table-cell",children:"Jabatan"}),e.jsx("th",{className:"px-4 py-3 sm:px-6 text-right text-xs font-semibold text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:h.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 sm:px-6 whitespace-nowrap",children:e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full overflow-hidden bg-gray-100 flex-shrink-0",children:s.image_url?e.jsx("img",{src:R(s.image_url),alt:s.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:e.jsx(P,{size:20,className:"sm:w-6 sm:h-6"})})})}),e.jsx("td",{className:"px-4 py-3 sm:px-6",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm",children:s.name}),s.nip&&e.jsx("p",{className:"text-xs text-gray-500 font-mono mt-0.5",children:s.nip})]})}),e.jsx("td",{className:"px-4 py-3 sm:px-6 text-sm text-gray-600 hidden sm:table-cell",children:s.position}),e.jsx("td",{className:"px-4 py-3 sm:px-6 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1 sm:gap-2",children:[e.jsx("button",{onClick:()=>M(s),className:"p-2 !text-accent-yellow hover:bg-accent-yellow/10 rounded-lg transition-colors",title:"Edit",children:e.jsx(X,{size:16})}),e.jsx("button",{onClick:()=>c(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Hapus",children:e.jsx($,{size:16})})]})})]},s.id))})]})}),l>1&&e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 sm:px-6 border-t border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex justify-between w-full sm:hidden",children:[e.jsx("button",{onClick:()=>p(s=>Math.max(s-1,1)),disabled:i===1,className:"relative inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsx("button",{onClick:()=>p(s=>Math.min(s+1,l)),disabled:i===l,className:"relative ml-3 inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:(i-1)*n+1})," to ",e.jsx("span",{className:"font-medium",children:Math.min(i*n,x.length)})," of ",e.jsx("span",{className:"font-medium",children:x.length})," results"]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[e.jsxs("button",{onClick:()=>p(s=>Math.max(s-1,1)),disabled:i===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Previous"}),e.jsx(Q,{className:"h-5 w-5","aria-hidden":"true"})]}),[...Array(l)].map((s,m)=>e.jsx("button",{onClick:()=>p(m+1),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${i===m+1?"z-10 bg-accent-yellow border-accent-yellow text-gray-900":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:m+1},m)),e.jsxs("button",{onClick:()=>p(s=>Math.min(s+1,l)),disabled:i===l,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("span",{className:"sr-only",children:"Next"}),e.jsx(V,{className:"h-5 w-5","aria-hidden":"true"})]})]})})]})]})]}):e.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(t,{size:28,className:"sm:w-8 sm:h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium mb-4 text-sm sm:text-base",children:"Belum ada data"})]})})}export{ge as default};
