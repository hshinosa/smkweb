import{j as o}from"./markdown-vendor-CIGiOj7E.js";import{r as c,R as _,S as Tn,f as On}from"./inertia-vendor-CFsdYvsV.js";import{r as Oe}from"./index-CjLAxSrQ.js";import{F as zt}from"./FileUploadField-DGzk2RBu.js";import{C as Ln}from"./ContentManagementPage-DVU9nbB8.js";import{M as Pn}from"./MiniTextEditor-CT14-nLM.js";import{z as fe}from"./app-BjrorLXI.js";import{g as Bt}from"./imageUtils-wYQj-GuB.js";import{as as ut,at as Fn,an as $t,N as zn,e as Te,au as Bn,av as $n,T as pt,G as _n}from"./ui-vendor-DKvpuSCb.js";import"./react-vendor-X_fu8xpB.js";import"./InputLabel-B7Cy73bq.js";import"./typography-ChUjANkt.js";import"./AdminLayout-BGv0ni_W.js";import"./transition-CiB-21bZ.js";import"./PrimaryButton-BP4GzKQS.js";function Un(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function De(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function wt(e){return"nodeType"in e}function U(e){var t,n;return e?De(e)?e:wt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Ct(e){const{Document:t}=U(e);return e instanceof t}function Ue(e){return De(e)?!1:e instanceof U(e).HTMLElement}function tn(e){return e instanceof U(e).SVGElement}function Se(e){return e?De(e)?e.document:wt(e)?Ct(e)?e:Ue(e)||tn(e)?e.ownerDocument:document:document:document}const ee=rt?c.useLayoutEffect:c.useEffect;function Dt(e){const t=c.useRef(e);return ee(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function Hn(){const e=c.useRef(null),t=c.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=c.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function ze(e,t){t===void 0&&(t=[e]);const n=c.useRef(e);return ee(()=>{n.current!==e&&(n.current=e)},t),n}function He(e,t){const n=c.useRef();return c.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Ze(e){const t=Dt(e),n=c.useRef(null),r=c.useCallback(i=>{i!==n.current&&t?.(i,n.current),n.current=i},[]);return[n,r]}function mt(e){const t=c.useRef();return c.useEffect(()=>{t.current=e},[e]),t.current}let dt={};function Xe(e,t){return c.useMemo(()=>{if(t)return t;const n=dt[e]==null?0:dt[e]+1;return dt[e]=n,e+"-"+n},[e,t])}function nn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((s,a)=>{const l=Object.entries(a);for(const[u,d]of l){const h=s[u];h!=null&&(s[u]=h+e*d)}return s},{...t})}}const Ce=nn(1),Be=nn(-1);function Xn(e){return"clientX"in e&&"clientY"in e}function St(e){if(!e)return!1;const{KeyboardEvent:t}=U(e.target);return t&&e instanceof t}function Kn(e){if(!e)return!1;const{TouchEvent:t}=U(e.target);return t&&e instanceof t}function bt(e){if(Kn(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Xn(e)?{x:e.clientX,y:e.clientY}:null}const $e=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[$e.Translate.toString(e),$e.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),_t="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Gn(e){return e.matches(_t)?e:e.querySelector(_t)}const Yn={display:"none"};function Wn(e){let{id:t,value:n}=e;return _.createElement("div",{id:t,style:Yn},n)}function Vn(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return _.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Jn(){const[e,t]=c.useState("");return{announce:c.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const rn=c.createContext(null);function qn(e){const t=c.useContext(rn);c.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Qn(){const[e]=c.useState(()=>new Set),t=c.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[c.useCallback(r=>{let{type:i,event:s}=r;e.forEach(a=>{var l;return(l=a[i])==null?void 0:l.call(a,s)})},[e]),t]}const Zn={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},er={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function tr(e){let{announcements:t=er,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=Zn}=e;const{announce:s,announcement:a}=Jn(),l=Xe("DndLiveRegion"),[u,d]=c.useState(!1);if(c.useEffect(()=>{d(!0)},[]),qn(c.useMemo(()=>({onDragStart(f){let{active:m}=f;s(t.onDragStart({active:m}))},onDragMove(f){let{active:m,over:g}=f;t.onDragMove&&s(t.onDragMove({active:m,over:g}))},onDragOver(f){let{active:m,over:g}=f;s(t.onDragOver({active:m,over:g}))},onDragEnd(f){let{active:m,over:g}=f;s(t.onDragEnd({active:m,over:g}))},onDragCancel(f){let{active:m,over:g}=f;s(t.onDragCancel({active:m,over:g}))}}),[s,t])),!u)return null;const h=_.createElement(_.Fragment,null,_.createElement(Wn,{id:r,value:i.draggable}),_.createElement(Vn,{id:l,announcement:a}));return n?Oe.createPortal(h,n):h}var O;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(O||(O={}));function et(){}function Ut(e,t){return c.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function nr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const J=Object.freeze({x:0,y:0});function sn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function on(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function rr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Ht(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function an(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Xt(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const sr=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Xt(t,t.left,t.top),s=[];for(const a of r){const{id:l}=a,u=n.get(l);if(u){const d=sn(Xt(u),i);s.push({id:l,data:{droppableContainer:a,value:d}})}}return s.sort(on)},ir=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Ht(t),s=[];for(const a of r){const{id:l}=a,u=n.get(l);if(u){const d=Ht(u),h=i.reduce((m,g,S)=>m+sn(d[S],g),0),f=Number((h/4).toFixed(4));s.push({id:l,data:{droppableContainer:a,value:f}})}}return s.sort(on)};function or(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=i-r,l=s-n;if(r<i&&n<s){const u=t.width*t.height,d=e.width*e.height,h=a*l,f=h/(u+d-h);return Number(f.toFixed(4))}return 0}const ar=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const s of r){const{id:a}=s,l=n.get(a);if(l){const u=or(l,t);u>0&&i.push({id:a,data:{droppableContainer:s,value:u}})}}return i.sort(rr)};function lr(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function ln(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:J}function cr(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return i.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...n})}}const ur=cr(1);function dr(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function fr(e,t,n){const r=dr(t);if(!r)return e;const{scaleX:i,scaleY:s,x:a,y:l}=r,u=e.left-a-(1-i)*parseFloat(n),d=e.top-l-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,f=s?e.height/s:e.height;return{width:h,height:f,top:d,right:u+h,bottom:d+f,left:u}}const hr={ignoreTransform:!1};function Ne(e,t){t===void 0&&(t=hr);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:h}=U(e).getComputedStyle(e);d&&(n=fr(n,d,h))}const{top:r,left:i,width:s,height:a,bottom:l,right:u}=n;return{top:r,left:i,width:s,height:a,bottom:l,right:u}}function Kt(e){return Ne(e,{ignoreTransform:!0})}function gr(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function pr(e,t){return t===void 0&&(t=U(e).getComputedStyle(e)),t.position==="fixed"}function mr(e,t){t===void 0&&(t=U(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const s=t[i];return typeof s=="string"?n.test(s):!1})}function st(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(Ct(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!Ue(i)||tn(i)||n.includes(i))return n;const s=U(e).getComputedStyle(i);return i!==e&&mr(i,s)&&n.push(i),pr(i,s)?n:r(i.parentNode)}return e?r(e):n}function cn(e){const[t]=st(e,1);return t??null}function ft(e){return!rt||!e?null:De(e)?e:wt(e)?Ct(e)||e===Se(e).scrollingElement?window:Ue(e)?e:null:null}function un(e){return De(e)?e.scrollX:e.scrollLeft}function dn(e){return De(e)?e.scrollY:e.scrollTop}function vt(e){return{x:un(e),y:dn(e)}}var L;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(L||(L={}));function fn(e){return!rt||!e?!1:e===document.scrollingElement}function hn(e){const t={x:0,y:0},n=fn(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,a=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:i,isLeft:s,isBottom:a,isRight:l,maxScroll:r,minScroll:t}}const br={x:.2,y:.2};function vr(e,t,n,r,i){let{top:s,left:a,right:l,bottom:u}=n;r===void 0&&(r=10),i===void 0&&(i=br);const{isTop:d,isBottom:h,isLeft:f,isRight:m}=hn(e),g={x:0,y:0},S={x:0,y:0},D={height:t.height*i.y,width:t.width*i.x};return!d&&s<=t.top+D.height?(g.y=L.Backward,S.y=r*Math.abs((t.top+D.height-s)/D.height)):!h&&u>=t.bottom-D.height&&(g.y=L.Forward,S.y=r*Math.abs((t.bottom-D.height-u)/D.height)),!m&&l>=t.right-D.width?(g.x=L.Forward,S.x=r*Math.abs((t.right-D.width-l)/D.width)):!f&&a<=t.left+D.width&&(g.x=L.Backward,S.x=r*Math.abs((t.left+D.width-a)/D.width)),{direction:g,speed:S}}function xr(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:a}=window;return{top:0,left:0,right:s,bottom:a,width:s,height:a}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function gn(e){return e.reduce((t,n)=>Ce(t,vt(n)),J)}function yr(e){return e.reduce((t,n)=>t+un(n),0)}function wr(e){return e.reduce((t,n)=>t+dn(n),0)}function Cr(e,t){if(t===void 0&&(t=Ne),!e)return;const{top:n,left:r,bottom:i,right:s}=t(e);cn(e)&&(i<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Dr=[["x",["left","right"],yr],["y",["top","bottom"],wr]];class Nt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=st(n),i=gn(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,a,l]of Dr)for(const u of a)Object.defineProperty(this,u,{get:()=>{const d=l(r),h=i[s]-d;return this.rect[u]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Le{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Sr(e){const{EventTarget:t}=U(e);return e instanceof t?e:Se(e)}function ht(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var W;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(W||(W={}));function Gt(e){e.preventDefault()}function Nr(e){e.stopPropagation()}var A;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(A||(A={}));const pn={start:[A.Space,A.Enter],cancel:[A.Esc],end:[A.Space,A.Enter,A.Tab]},jr=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case A.Right:return{...n,x:n.x+25};case A.Left:return{...n,x:n.x-25};case A.Down:return{...n,y:n.y+25};case A.Up:return{...n,y:n.y-25}}};class jt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Le(Se(n)),this.windowListeners=new Le(U(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(W.Resize,this.handleCancel),this.windowListeners.add(W.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(W.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&Cr(r),n(J)}handleKeyDown(t){if(St(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:s=pn,coordinateGetter:a=jr,scrollBehavior:l="smooth"}=i,{code:u}=t;if(s.end.includes(u)){this.handleEnd(t);return}if(s.cancel.includes(u)){this.handleCancel(t);return}const{collisionRect:d}=r.current,h=d?{x:d.left,y:d.top}:J;this.referenceCoordinates||(this.referenceCoordinates=h);const f=a(t,{active:n,context:r.current,currentCoordinates:h});if(f){const m=Be(f,h),g={x:0,y:0},{scrollableAncestors:S}=r.current;for(const D of S){const N=t.code,{isTop:k,isRight:M,isLeft:b,isBottom:v,maxScroll:C,minScroll:E}=hn(D),x=xr(D),w={x:Math.min(N===A.Right?x.right-x.width/2:x.right,Math.max(N===A.Right?x.left:x.left+x.width/2,f.x)),y:Math.min(N===A.Down?x.bottom-x.height/2:x.bottom,Math.max(N===A.Down?x.top:x.top+x.height/2,f.y))},j=N===A.Right&&!M||N===A.Left&&!b,y=N===A.Down&&!v||N===A.Up&&!k;if(j&&w.x!==f.x){const p=D.scrollLeft+m.x,R=N===A.Right&&p<=C.x||N===A.Left&&p>=E.x;if(R&&!m.y){D.scrollTo({left:p,behavior:l});return}R?g.x=D.scrollLeft-p:g.x=N===A.Right?D.scrollLeft-C.x:D.scrollLeft-E.x,g.x&&D.scrollBy({left:-g.x,behavior:l});break}else if(y&&w.y!==f.y){const p=D.scrollTop+m.y,R=N===A.Down&&p<=C.y||N===A.Up&&p>=E.y;if(R&&!m.x){D.scrollTo({top:p,behavior:l});return}R?g.y=D.scrollTop-p:g.y=N===A.Down?D.scrollTop-C.y:D.scrollTop-E.y,g.y&&D.scrollBy({top:-g.y,behavior:l});break}}this.handleMove(t,Ce(Be(f,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}jt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=pn,onActivation:i}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(r.start.includes(a)){const l=s.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),i?.({event:e.nativeEvent}),!0)}return!1}}];function Yt(e){return!!(e&&"distance"in e)}function Wt(e){return!!(e&&"delay"in e)}class Rt{constructor(t,n,r){var i;r===void 0&&(r=Sr(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:a}=s;this.props=t,this.events=n,this.document=Se(a),this.documentListeners=new Le(this.document),this.listeners=new Le(r),this.windowListeners=new Le(U(a)),this.initialCoordinates=(i=bt(s))!=null?i:J,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(W.Resize,this.handleCancel),this.windowListeners.add(W.DragStart,Gt),this.windowListeners.add(W.VisibilityChange,this.handleCancel),this.windowListeners.add(W.ContextMenu,Gt),this.documentListeners.add(W.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Wt(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Yt(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(W.Click,Nr,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(W.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:s}=this,{onMove:a,options:{activationConstraint:l}}=s;if(!i)return;const u=(n=bt(t))!=null?n:J,d=Be(i,u);if(!r&&l){if(Yt(l)){if(l.tolerance!=null&&ht(d,l.tolerance))return this.handleCancel();if(ht(d,l.distance))return this.handleStart()}if(Wt(l)&&ht(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),a(u)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===A.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Rr={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Et extends Rt{constructor(t){const{event:n}=t,r=Se(n.target);super(t,Rr,r)}}Et.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Er={move:{name:"mousemove"},end:{name:"mouseup"}};var xt;(function(e){e[e.RightClick=2]="RightClick"})(xt||(xt={}));class kr extends Rt{constructor(t){super(t,Er,Se(t.event.target))}}kr.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===xt.RightClick?!1:(r?.({event:n}),!0)}}];const gt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Mr extends Rt{constructor(t){super(t,gt)}static setup(){return window.addEventListener(gt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(gt.move.name,t)};function t(){}}}Mr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r?.({event:n}),!0)}}];var Pe;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Pe||(Pe={}));var tt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(tt||(tt={}));function Ar(e){let{acceleration:t,activator:n=Pe.Pointer,canScroll:r,draggingRect:i,enabled:s,interval:a=5,order:l=tt.TreeOrder,pointerCoordinates:u,scrollableAncestors:d,scrollableAncestorRects:h,delta:f,threshold:m}=e;const g=Tr({delta:f,disabled:!s}),[S,D]=Hn(),N=c.useRef({x:0,y:0}),k=c.useRef({x:0,y:0}),M=c.useMemo(()=>{switch(n){case Pe.Pointer:return u?{top:u.y,bottom:u.y,left:u.x,right:u.x}:null;case Pe.DraggableRect:return i}},[n,i,u]),b=c.useRef(null),v=c.useCallback(()=>{const E=b.current;if(!E)return;const x=N.current.x*k.current.x,w=N.current.y*k.current.y;E.scrollBy(x,w)},[]),C=c.useMemo(()=>l===tt.TreeOrder?[...d].reverse():d,[l,d]);c.useEffect(()=>{if(!s||!d.length||!M){D();return}for(const E of C){if(r?.(E)===!1)continue;const x=d.indexOf(E),w=h[x];if(!w)continue;const{direction:j,speed:y}=vr(E,w,M,t,m);for(const p of["x","y"])g[p][j[p]]||(y[p]=0,j[p]=0);if(y.x>0||y.y>0){D(),b.current=E,S(v,a),N.current=y,k.current=j;return}}N.current={x:0,y:0},k.current={x:0,y:0},D()},[t,v,r,D,s,a,JSON.stringify(M),JSON.stringify(g),S,d,C,h,JSON.stringify(m)])}const Ir={x:{[L.Backward]:!1,[L.Forward]:!1},y:{[L.Backward]:!1,[L.Forward]:!1}};function Tr(e){let{delta:t,disabled:n}=e;const r=mt(t);return He(i=>{if(n||!r||!i)return Ir;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[L.Backward]:i.x[L.Backward]||s.x===-1,[L.Forward]:i.x[L.Forward]||s.x===1},y:{[L.Backward]:i.y[L.Backward]||s.y===-1,[L.Forward]:i.y[L.Forward]||s.y===1}}},[n,t,r])}function Or(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return He(i=>{var s;return t==null?null:(s=r??i)!=null?s:null},[r,t])}function Lr(e,t){return c.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,s=i.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,r)}));return[...n,...s]},[]),[e,t])}var _e;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(_e||(_e={}));var yt;(function(e){e.Optimized="optimized"})(yt||(yt={}));const Vt=new Map;function Pr(e,t){let{dragging:n,dependencies:r,config:i}=t;const[s,a]=c.useState(null),{frequency:l,measure:u,strategy:d}=i,h=c.useRef(e),f=N(),m=ze(f),g=c.useCallback(function(k){k===void 0&&(k=[]),!m.current&&a(M=>M===null?k:M.concat(k.filter(b=>!M.includes(b))))},[m]),S=c.useRef(null),D=He(k=>{if(f&&!n)return Vt;if(!k||k===Vt||h.current!==e||s!=null){const M=new Map;for(let b of e){if(!b)continue;if(s&&s.length>0&&!s.includes(b.id)&&b.rect.current){M.set(b.id,b.rect.current);continue}const v=b.node.current,C=v?new Nt(u(v),v):null;b.rect.current=C,C&&M.set(b.id,C)}return M}return k},[e,s,n,f,u]);return c.useEffect(()=>{h.current=e},[e]),c.useEffect(()=>{f||g()},[n,f]),c.useEffect(()=>{s&&s.length>0&&a(null)},[JSON.stringify(s)]),c.useEffect(()=>{f||typeof l!="number"||S.current!==null||(S.current=setTimeout(()=>{g(),S.current=null},l))},[l,f,g,...r]),{droppableRects:D,measureDroppableContainers:g,measuringScheduled:s!=null};function N(){switch(d){case _e.Always:return!1;case _e.BeforeDragging:return n;default:return!n}}}function mn(e,t){return He(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Fr(e,t){return mn(e,t)}function zr(e){let{callback:t,disabled:n}=e;const r=Dt(t),i=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return c.useEffect(()=>()=>i?.disconnect(),[i]),i}function it(e){let{callback:t,disabled:n}=e;const r=Dt(t),i=c.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return c.useEffect(()=>()=>i?.disconnect(),[i]),i}function Br(e){return new Nt(Ne(e),e)}function Jt(e,t,n){t===void 0&&(t=Br);const[r,i]=c.useState(null);function s(){i(u=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=u??n)!=null?d:null}const h=t(e);return JSON.stringify(u)===JSON.stringify(h)?u:h})}const a=zr({callback(u){if(e)for(const d of u){const{type:h,target:f}=d;if(h==="childList"&&f instanceof HTMLElement&&f.contains(e)){s();break}}}}),l=it({callback:s});return ee(()=>{s(),e?(l?.observe(e),a?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),a?.disconnect())},[e]),r}function $r(e){const t=mn(e);return ln(e,t)}const qt=[];function _r(e){const t=c.useRef(e),n=He(r=>e?r&&r!==qt&&e&&t.current&&e.parentNode===t.current.parentNode?r:st(e):qt,[e]);return c.useEffect(()=>{t.current=e},[e]),n}function Ur(e){const[t,n]=c.useState(null),r=c.useRef(e),i=c.useCallback(s=>{const a=ft(s.target);a&&n(l=>l?(l.set(a,vt(a)),new Map(l)):null)},[]);return c.useEffect(()=>{const s=r.current;if(e!==s){a(s);const l=e.map(u=>{const d=ft(u);return d?(d.addEventListener("scroll",i,{passive:!0}),[d,vt(d)]):null}).filter(u=>u!=null);n(l.length?new Map(l):null),r.current=e}return()=>{a(e),a(s)};function a(l){l.forEach(u=>{const d=ft(u);d?.removeEventListener("scroll",i)})}},[i,e]),c.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,a)=>Ce(s,a),J):gn(e):J,[e,t])}function Qt(e,t){t===void 0&&(t=[]);const n=c.useRef(null);return c.useEffect(()=>{n.current=null},t),c.useEffect(()=>{const r=e!==J;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Be(e,n.current):J}function Hr(e){c.useEffect(()=>{if(!rt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Xr(e,t){return c.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:s}=r;return n[i]=a=>{s(a,t)},n},{}),[e,t])}function bn(e){return c.useMemo(()=>e?gr(e):null,[e])}const Zt=[];function Kr(e,t){t===void 0&&(t=Ne);const[n]=e,r=bn(n?U(n):null),[i,s]=c.useState(Zt);function a(){s(()=>e.length?e.map(u=>fn(u)?r:new Nt(t(u),u)):Zt)}const l=it({callback:a});return ee(()=>{l?.disconnect(),a(),e.forEach(u=>l?.observe(u))},[e]),i}function Gr(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Ue(t)?t:e}function Yr(e){let{measure:t}=e;const[n,r]=c.useState(null),i=c.useCallback(d=>{for(const{target:h}of d)if(Ue(h)){r(f=>{const m=t(h);return f?{...f,width:m.width,height:m.height}:m});break}},[t]),s=it({callback:i}),a=c.useCallback(d=>{const h=Gr(d);s?.disconnect(),h&&s?.observe(h),r(h?t(h):null)},[t,s]),[l,u]=Ze(a);return c.useMemo(()=>({nodeRef:l,rect:n,setRef:u}),[n,l,u])}const Wr=[{sensor:Et,options:{}},{sensor:jt,options:{}}],Vr={current:{}},Qe={draggable:{measure:Kt},droppable:{measure:Kt,strategy:_e.WhileDragging,frequency:yt.Optimized},dragOverlay:{measure:Ne}};class Fe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Jr={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Fe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:et},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qe,measureDroppableContainers:et,windowRect:null,measuringScheduled:!1},qr={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:et,draggableNodes:new Map,over:null,measureDroppableContainers:et},ot=c.createContext(qr),vn=c.createContext(Jr);function Qr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Fe}}}function Zr(e,t){switch(t.type){case O.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case O.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case O.DragEnd:case O.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case O.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new Fe(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case O.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new Fe(e.droppable.containers);return a.set(n,{...s,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case O.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new Fe(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function es(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=c.useContext(ot),s=mt(r),a=mt(n?.id);return c.useEffect(()=>{if(!t&&!r&&s&&a!=null){if(!St(s)||document.activeElement===s.target)return;const l=i.get(a);if(!l)return;const{activatorNode:u,node:d}=l;if(!u.current&&!d.current)return;requestAnimationFrame(()=>{for(const h of[u.current,d.current]){if(!h)continue;const f=Gn(h);if(f){f.focus();break}}})}},[r,t,i,a,s]),null}function ts(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,s)=>s({transform:i,...r}),n):n}function ns(e){return c.useMemo(()=>({draggable:{...Qe.draggable,...e?.draggable},droppable:{...Qe.droppable,...e?.droppable},dragOverlay:{...Qe.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function rs(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const s=c.useRef(!1),{x:a,y:l}=typeof i=="boolean"?{x:i,y:i}:i;ee(()=>{if(!a&&!l||!t){s.current=!1;return}if(s.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const h=n(d),f=ln(h,r);if(a||(f.x=0),l||(f.y=0),s.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const m=cn(d);m&&m.scrollBy({top:f.y,left:f.x})}},[t,a,l,r,n])}const xn=c.createContext({...J,scaleX:1,scaleY:1});var he;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(he||(he={}));const ss=c.memo(function(t){var n,r,i,s;let{id:a,accessibility:l,autoScroll:u=!0,children:d,sensors:h=Wr,collisionDetection:f=ar,measuring:m,modifiers:g,...S}=t;const D=c.useReducer(Zr,void 0,Qr),[N,k]=D,[M,b]=Qn(),[v,C]=c.useState(he.Uninitialized),E=v===he.Initialized,{draggable:{active:x,nodes:w,translate:j},droppable:{containers:y}}=N,p=x!=null?w.get(x):null,R=c.useRef({initial:null,translated:null}),I=c.useMemo(()=>{var z;return x!=null?{id:x,data:(z=p?.data)!=null?z:Vr,rect:R}:null},[x,p]),B=c.useRef(null),[V,pe]=c.useState(null),[P,Ke]=c.useState(null),te=ze(S,Object.values(S)),je=Xe("DndDescribedBy",a),Ge=c.useMemo(()=>y.getEnabled(),[y]),$=ns(m),{droppableRects:ne,measureDroppableContainers:ge,measuringScheduled:Re}=Pr(Ge,{dragging:E,dependencies:[j.x,j.y],config:$.droppable}),G=Or(w,x),Ye=c.useMemo(()=>P?bt(P):null,[P]),oe=In(),re=Fr(G,$.draggable.measure);rs({activeNode:x!=null?w.get(x):null,config:oe.layoutShiftCompensation,initialRect:re,measure:$.draggable.measure});const T=Jt(G,$.draggable.measure,re),Ee=Jt(G?G.parentElement:null),q=c.useRef({activatorEvent:null,active:null,activeNode:G,collisionRect:null,collisions:null,droppableRects:ne,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=y.getNodeFor((n=q.current.over)==null?void 0:n.id),se=Yr({measure:$.dragOverlay.measure}),be=(r=se.nodeRef.current)!=null?r:G,ve=E?(i=se.rect)!=null?i:T:null,Mt=!!(se.nodeRef.current&&se.rect),At=$r(Mt?null:T),at=bn(be?U(be):null),ae=_r(E?me??G:null),We=Kr(ae),Ve=ts(g,{transform:{x:j.x-At.x,y:j.y-At.y,scaleX:1,scaleY:1},activatorEvent:P,active:I,activeNodeRect:T,containerNodeRect:Ee,draggingNodeRect:ve,over:q.current.over,overlayNodeRect:se.rect,scrollableAncestors:ae,scrollableAncestorRects:We,windowRect:at}),It=Ye?Ce(Ye,j):null,Tt=Ur(ae),Nn=Qt(Tt),jn=Qt(Tt,[T]),xe=Ce(Ve,Nn),ye=ve?ur(ve,Ve):null,ke=I&&ye?f({active:I,collisionRect:ye,droppableRects:ne,droppableContainers:Ge,pointerCoordinates:It}):null,Ot=an(ke,"id"),[le,Lt]=c.useState(null),Rn=Mt?Ve:Ce(Ve,jn),En=lr(Rn,(s=le?.rect)!=null?s:null,T),lt=c.useRef(null),Pt=c.useCallback((z,H)=>{let{sensor:X,options:ce}=H;if(B.current==null)return;const Y=w.get(B.current);if(!Y)return;const K=z.nativeEvent,Q=new X({active:B.current,activeNode:Y,event:K,options:ce,context:q,onAbort(F){if(!w.get(F))return;const{onDragAbort:Z}=te.current,ie={id:F};Z?.(ie),M({type:"onDragAbort",event:ie})},onPending(F,ue,Z,ie){if(!w.get(F))return;const{onDragPending:Ae}=te.current,de={id:F,constraint:ue,initialCoordinates:Z,offset:ie};Ae?.(de),M({type:"onDragPending",event:de})},onStart(F){const ue=B.current;if(ue==null)return;const Z=w.get(ue);if(!Z)return;const{onDragStart:ie}=te.current,Me={activatorEvent:K,active:{id:ue,data:Z.data,rect:R}};Oe.unstable_batchedUpdates(()=>{ie?.(Me),C(he.Initializing),k({type:O.DragStart,initialCoordinates:F,active:ue}),M({type:"onDragStart",event:Me}),pe(lt.current),Ke(K)})},onMove(F){k({type:O.DragMove,coordinates:F})},onEnd:we(O.DragEnd),onCancel:we(O.DragCancel)});lt.current=Q;function we(F){return async function(){const{active:Z,collisions:ie,over:Me,scrollAdjustedTranslate:Ae}=q.current;let de=null;if(Z&&Ae){const{cancelDrop:Ie}=te.current;de={activatorEvent:K,active:Z,collisions:ie,delta:Ae,over:Me},F===O.DragEnd&&typeof Ie=="function"&&await Promise.resolve(Ie(de))&&(F=O.DragCancel)}B.current=null,Oe.unstable_batchedUpdates(()=>{k({type:F}),C(he.Uninitialized),Lt(null),pe(null),Ke(null),lt.current=null;const Ie=F===O.DragEnd?"onDragEnd":"onDragCancel";if(de){const ct=te.current[Ie];ct?.(de),M({type:Ie,event:de})}})}}},[w]),kn=c.useCallback((z,H)=>(X,ce)=>{const Y=X.nativeEvent,K=w.get(ce);if(B.current!==null||!K||Y.dndKit||Y.defaultPrevented)return;const Q={active:K};z(X,H.options,Q)===!0&&(Y.dndKit={capturedBy:H.sensor},B.current=ce,Pt(X,H))},[w,Pt]),Ft=Lr(h,kn);Hr(h),ee(()=>{T&&v===he.Initializing&&C(he.Initialized)},[T,v]),c.useEffect(()=>{const{onDragMove:z}=te.current,{active:H,activatorEvent:X,collisions:ce,over:Y}=q.current;if(!H||!X)return;const K={active:H,activatorEvent:X,collisions:ce,delta:{x:xe.x,y:xe.y},over:Y};Oe.unstable_batchedUpdates(()=>{z?.(K),M({type:"onDragMove",event:K})})},[xe.x,xe.y]),c.useEffect(()=>{const{active:z,activatorEvent:H,collisions:X,droppableContainers:ce,scrollAdjustedTranslate:Y}=q.current;if(!z||B.current==null||!H||!Y)return;const{onDragOver:K}=te.current,Q=ce.get(Ot),we=Q&&Q.rect.current?{id:Q.id,rect:Q.rect.current,data:Q.data,disabled:Q.disabled}:null,F={active:z,activatorEvent:H,collisions:X,delta:{x:Y.x,y:Y.y},over:we};Oe.unstable_batchedUpdates(()=>{Lt(we),K?.(F),M({type:"onDragOver",event:F})})},[Ot]),ee(()=>{q.current={activatorEvent:P,active:I,activeNode:G,collisionRect:ye,collisions:ke,droppableRects:ne,draggableNodes:w,draggingNode:be,draggingNodeRect:ve,droppableContainers:y,over:le,scrollableAncestors:ae,scrollAdjustedTranslate:xe},R.current={initial:ve,translated:ye}},[I,G,ke,ye,w,be,ve,ne,y,le,ae,xe]),Ar({...oe,delta:j,draggingRect:ye,pointerCoordinates:It,scrollableAncestors:ae,scrollableAncestorRects:We});const Mn=c.useMemo(()=>({active:I,activeNode:G,activeNodeRect:T,activatorEvent:P,collisions:ke,containerNodeRect:Ee,dragOverlay:se,draggableNodes:w,droppableContainers:y,droppableRects:ne,over:le,measureDroppableContainers:ge,scrollableAncestors:ae,scrollableAncestorRects:We,measuringConfiguration:$,measuringScheduled:Re,windowRect:at}),[I,G,T,P,ke,Ee,se,w,y,ne,le,ge,ae,We,$,Re,at]),An=c.useMemo(()=>({activatorEvent:P,activators:Ft,active:I,activeNodeRect:T,ariaDescribedById:{draggable:je},dispatch:k,draggableNodes:w,over:le,measureDroppableContainers:ge}),[P,Ft,I,T,k,je,w,le,ge]);return _.createElement(rn.Provider,{value:b},_.createElement(ot.Provider,{value:An},_.createElement(vn.Provider,{value:Mn},_.createElement(xn.Provider,{value:En},d)),_.createElement(es,{disabled:l?.restoreFocus===!1})),_.createElement(tr,{...l,hiddenTextDescribedById:je}));function In(){const z=V?.autoScrollEnabled===!1,H=typeof u=="object"?u.enabled===!1:u===!1,X=E&&!z&&!H;return typeof u=="object"?{...u,enabled:X}:{enabled:X}}}),is=c.createContext(null),en="button",os="Draggable";function as(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const s=Xe(os),{activators:a,activatorEvent:l,active:u,activeNodeRect:d,ariaDescribedById:h,draggableNodes:f,over:m}=c.useContext(ot),{role:g=en,roleDescription:S="draggable",tabIndex:D=0}=i??{},N=u?.id===t,k=c.useContext(N?xn:is),[M,b]=Ze(),[v,C]=Ze(),E=Xr(a,t),x=ze(n);ee(()=>(f.set(t,{id:t,key:s,node:M,activatorNode:v,data:x}),()=>{const j=f.get(t);j&&j.key===s&&f.delete(t)}),[f,t]);const w=c.useMemo(()=>({role:g,tabIndex:D,"aria-disabled":r,"aria-pressed":N&&g===en?!0:void 0,"aria-roledescription":S,"aria-describedby":h.draggable}),[r,g,D,N,S,h.draggable]);return{active:u,activatorEvent:l,activeNodeRect:d,attributes:w,isDragging:N,listeners:r?void 0:E,node:M,over:m,setNodeRef:b,setActivatorNodeRef:C,transform:k}}function ls(){return c.useContext(vn)}const cs="Droppable",us={timeout:25};function ds(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const s=Xe(cs),{active:a,dispatch:l,over:u,measureDroppableContainers:d}=c.useContext(ot),h=c.useRef({disabled:n}),f=c.useRef(!1),m=c.useRef(null),g=c.useRef(null),{disabled:S,updateMeasurementsFor:D,timeout:N}={...us,...i},k=ze(D??r),M=c.useCallback(()=>{if(!f.current){f.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{d(Array.isArray(k.current)?k.current:[k.current]),g.current=null},N)},[N]),b=it({callback:M,disabled:S||!a}),v=c.useCallback((w,j)=>{b&&(j&&(b.unobserve(j),f.current=!1),w&&b.observe(w))},[b]),[C,E]=Ze(v),x=ze(t);return c.useEffect(()=>{!b||!C.current||(b.disconnect(),f.current=!1,b.observe(C.current))},[C,b]),c.useEffect(()=>(l({type:O.RegisterDroppable,element:{id:r,key:s,disabled:n,node:C,rect:m,data:x}}),()=>l({type:O.UnregisterDroppable,key:s,id:r})),[r]),c.useEffect(()=>{n!==h.current.disabled&&(l({type:O.SetDroppableDisabled,id:r,key:s,disabled:n}),h.current.disabled=n)},[r,s,n,l]),{active:a,rect:m,isOver:u?.id===r,node:C,over:u,setNodeRef:E}}function kt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function fs(e,t){return e.reduce((n,r,i)=>{const s=t.get(r);return s&&(n[i]=s),n},Array(e.length))}function Je(e){return e!==null&&e>=0}function hs(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function gs(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const yn=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const s=kt(t,r,n),a=t[i],l=s[i];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},qe={scaleX:1,scaleY:1},ps=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:s,overIndex:a}=e;const l=(t=s[n])!=null?t:r;if(!l)return null;if(i===n){const d=s[a];return d?{x:0,y:n<a?d.top+d.height-(l.top+l.height):d.top-l.top,...qe}:null}const u=ms(s,i,n);return i>n&&i<=a?{x:0,y:-l.height-u,...qe}:i<n&&i>=a?{x:0,y:l.height+u,...qe}:{x:0,y:0,...qe}};function ms(e,t,n){const r=e[t],i=e[t-1],s=e[t+1];return r?n<t?i?r.top-(i.top+i.height):s?s.top-(r.top+r.height):0:s?s.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const wn="Sortable",Cn=_.createContext({activeIndex:-1,containerId:wn,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:yn,disabled:{draggable:!1,droppable:!1}});function bs(e){let{children:t,id:n,items:r,strategy:i=yn,disabled:s=!1}=e;const{active:a,dragOverlay:l,droppableRects:u,over:d,measureDroppableContainers:h}=ls(),f=Xe(wn,n),m=l.rect!==null,g=c.useMemo(()=>r.map(E=>typeof E=="object"&&"id"in E?E.id:E),[r]),S=a!=null,D=a?g.indexOf(a.id):-1,N=d?g.indexOf(d.id):-1,k=c.useRef(g),M=!hs(g,k.current),b=N!==-1&&D===-1||M,v=gs(s);ee(()=>{M&&S&&h(g)},[M,g,S,h]),c.useEffect(()=>{k.current=g},[g]);const C=c.useMemo(()=>({activeIndex:D,containerId:f,disabled:v,disableTransforms:b,items:g,overIndex:N,useDragOverlay:m,sortedRects:fs(g,u),strategy:i}),[D,f,v.draggable,v.droppable,b,g,N,u,m,i]);return _.createElement(Cn.Provider,{value:C},t)}const vs=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return kt(n,r,i).indexOf(t)},xs=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:s,newIndex:a,previousItems:l,previousContainerId:u,transition:d}=e;return!d||!r||l!==s&&i===a?!1:n?!0:a!==i&&t===u},ys={duration:200,easing:"ease"},Dn="transform",ws=$e.Transition.toString({property:Dn,duration:0,easing:"linear"}),Cs={roleDescription:"sortable"};function Ds(e){let{disabled:t,index:n,node:r,rect:i}=e;const[s,a]=c.useState(null),l=c.useRef(n);return ee(()=>{if(!t&&n!==l.current&&r.current){const u=i.current;if(u){const d=Ne(r.current,{ignoreTransform:!0}),h={x:u.left-d.left,y:u.top-d.top,scaleX:u.width/d.width,scaleY:u.height/d.height};(h.x||h.y)&&a(h)}}n!==l.current&&(l.current=n)},[t,n,r,i]),c.useEffect(()=>{s&&a(null)},[s]),s}function Ss(e){let{animateLayoutChanges:t=xs,attributes:n,disabled:r,data:i,getNewIndex:s=vs,id:a,strategy:l,resizeObserverConfig:u,transition:d=ys}=e;const{items:h,containerId:f,activeIndex:m,disabled:g,disableTransforms:S,sortedRects:D,overIndex:N,useDragOverlay:k,strategy:M}=c.useContext(Cn),b=Ns(r,g),v=h.indexOf(a),C=c.useMemo(()=>({sortable:{containerId:f,index:v,items:h},...i}),[f,i,v,h]),E=c.useMemo(()=>h.slice(h.indexOf(a)),[h,a]),{rect:x,node:w,isOver:j,setNodeRef:y}=ds({id:a,data:C,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:E,...u}}),{active:p,activatorEvent:R,activeNodeRect:I,attributes:B,setNodeRef:V,listeners:pe,isDragging:P,over:Ke,setActivatorNodeRef:te,transform:je}=as({id:a,data:C,attributes:{...Cs,...n},disabled:b.draggable}),Ge=Un(y,V),$=!!p,ne=$&&!S&&Je(m)&&Je(N),ge=!k&&P,Re=ge&&ne?je:null,Ye=ne?Re??(l??M)({rects:D,activeNodeRect:I,activeIndex:m,overIndex:N,index:v}):null,oe=Je(m)&&Je(N)?s({id:a,items:h,activeIndex:m,overIndex:N}):v,re=p?.id,T=c.useRef({activeId:re,items:h,newIndex:oe,containerId:f}),Ee=h!==T.current.items,q=t({active:p,containerId:f,isDragging:P,isSorting:$,id:a,index:v,items:h,newIndex:T.current.newIndex,previousItems:T.current.items,previousContainerId:T.current.containerId,transition:d,wasDragging:T.current.activeId!=null}),me=Ds({disabled:!q,index:v,node:w,rect:x});return c.useEffect(()=>{$&&T.current.newIndex!==oe&&(T.current.newIndex=oe),f!==T.current.containerId&&(T.current.containerId=f),h!==T.current.items&&(T.current.items=h)},[$,oe,f,h]),c.useEffect(()=>{if(re===T.current.activeId)return;if(re!=null&&T.current.activeId==null){T.current.activeId=re;return}const be=setTimeout(()=>{T.current.activeId=re},50);return()=>clearTimeout(be)},[re]),{active:p,activeIndex:m,attributes:B,data:C,rect:x,index:v,newIndex:oe,items:h,isOver:j,isSorting:$,isDragging:P,listeners:pe,node:w,overIndex:N,over:Ke,setNodeRef:Ge,setActivatorNodeRef:te,setDroppableNodeRef:y,setDraggableNodeRef:V,transform:me??Ye,transition:se()};function se(){if(me||Ee&&T.current.newIndex===v)return ws;if(!(ge&&!St(R)||!d)&&($||q))return $e.Transition.toString({...d,property:Dn})}}function Ns(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function nt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const js=[A.Down,A.Right,A.Up,A.Left],Rs=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:s,over:a,scrollableAncestors:l}}=t;if(js.includes(e.code)){if(e.preventDefault(),!n||!r)return;const u=[];s.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const m=i.get(f.id);if(m)switch(e.code){case A.Down:r.top<m.top&&u.push(f);break;case A.Up:r.top>m.top&&u.push(f);break;case A.Left:r.left>m.left&&u.push(f);break;case A.Right:r.left<m.left&&u.push(f);break}});const d=ir({collisionRect:r,droppableRects:i,droppableContainers:u});let h=an(d,"id");if(h===a?.id&&d.length>1&&(h=d[1].id),h!=null){const f=s.get(n.id),m=s.get(h),g=m?i.get(m.id):null,S=m?.node.current;if(S&&g&&f&&m){const N=st(S).some((E,x)=>l[x]!==E),k=Sn(f,m),M=Es(f,m),b=N||!k?{x:0,y:0}:{x:M?r.width-g.width:0,y:M?r.height-g.height:0},v={x:g.left,y:g.top};return b.x&&b.y?v:Be(v,b)}}}};function Sn(e,t){return!nt(e)||!nt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Es(e,t){return!nt(e)||!nt(t)||!Sn(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const ks=({id:e,value:t,index:n,onUpdate:r,onRemove:i})=>{const{attributes:s,listeners:a,setNodeRef:l,transform:u,transition:d,isDragging:h}=Ss({id:e}),f={transform:$e.Transform.toString(u),transition:d};return o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -left-4 top-4 bg-primary text-white rounded-full w-10 h-10 flex items-center justify-center text-sm font-bold shadow-lg z-10",children:n+1}),o.jsx("div",{ref:l,style:f,className:"bg-gradient-to-r from-gray-50 to-white p-4 rounded-xl border-2 border-gray-200 relative group hover:shadow-md transition-all","data-dragging":h,children:o.jsxs("div",{className:"flex items-center gap-3 pl-8",style:{opacity:h?.5:1},children:[o.jsx("button",{type:"button",...s,...a,className:"cursor-grab active:cursor-grabbing p-1.5 text-gray-400 hover:text-primary hover:bg-primary/5 rounded-lg transition-colors flex-shrink-0",title:"Seret untuk mengubah urutan",children:o.jsx(_n,{className:"w-5 h-5"})}),o.jsx("input",{type:"text",value:t,onChange:m=>r(n,m.target.value),className:"flex-1 rounded-lg border-gray-300 focus:ring-primary focus:border-primary",placeholder:"Masukkan misi sekolah..."}),o.jsx("button",{type:"button",onClick:()=>i(n),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors flex-shrink-0",title:"Hapus misi",children:o.jsx(pt,{className:"w-4 h-4"})})]})})]})};function Ks({auth:e,sections:t,activeSection:n}){const[r,i]=c.useState(n||"history"),{data:s,setData:a,post:l,processing:u,errors:d}=Tn({section:r,content:t[r]||{}}),h=nr(Ut(Et),Ut(jt,{coordinateGetter:Rs})),f=[{key:"history",label:"Konten Sejarah",description:"Kelola lini masa sejarah berdirinya sekolah.",icon:ut},{key:"vision_mission",label:"Konten Visi & Misi",description:"Visi, misi, dan tujuan strategis sekolah.",icon:Fn},{key:"facilities",label:"Konten Fasilitas",description:"Daftar fasilitas pendukung kegiatan belajar mengajar.",icon:$t},{key:"organization",label:"Bagan Organisasi",description:"Bagan struktur kepengurusan sekolah.",icon:zn}],m=b=>{i(b),a({section:b,content:t[b]||{}})},g=b=>{b&&b.preventDefault();const v=10*1024*1024,C=["image/jpeg","image/jpg","image/png","image/gif","image/webp"];if((r==="organization"||r==="history")&&s.content?.image instanceof File){if(s.content.image.size>v){fe.error("Ukuran gambar maksimal 10MB");return}if(!C.includes(s.content.image.type)){fe.error("Format gambar harus JPG, PNG, GIF, atau WebP");return}}if(r==="facilities"&&s.content?.items){const x=s.content.items.find(w=>w.image_file instanceof File?w.image_file.size>v||!C.includes(w.image_file.type):!1);if(x){x.image_file.size>v?fe.error("Ukuran gambar fasilitas maksimal 10MB"):fe.error("Format gambar fasilitas harus JPG, PNG, GIF, atau WebP");return}}if(r==="facilities"&&s.content?.items?.some(x=>x.image_file instanceof File)||r==="organization"&&s.content?.image instanceof File||r==="history"&&s.content?.image instanceof File){const x=new FormData;x.append("section",s.section),s.content.title&&x.append("content[title]",s.content.title),s.content.description&&x.append("content[description]",s.content.description),(r==="organization"||r==="history")&&s.content.image instanceof File?x.append("content[image]",s.content.image):s.content.image_url&&x.append("content[image_url]",s.content.image_url),s.content.items&&Array.isArray(s.content.items)&&s.content.items.forEach((w,j)=>{const y=w.title||w.name||"",p=w.image_url||w.image||"";x.append(`content[items][${j}][title]`,y),x.append(`content[items][${j}][image_url]`,p),w.image_file instanceof File&&x.append(`content[items][${j}][image_file]`,w.image_file)}),On.post(route("admin.school-profile.update"),x,{forceFormData:!0,preserveScroll:!0,preserveState:!0,onSuccess:()=>{fe.success("Perubahan berhasil disimpan!")},onError:w=>{console.error("Save errors:",w),fe.error("Gagal menyimpan perubahan.")}})}else l(route("admin.school-profile.update"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{fe.success("Perubahan berhasil disimpan!")},onError:x=>{console.error("Save errors:",x),fe.error("Gagal menyimpan perubahan. Silakan periksa formulir.")}})},S=(b,v)=>{a("content",{...s.content,[b]:v})},D=()=>{const b=s.content||{},v=Array.isArray(b.timeline)?b.timeline:[],C=y=>{S("timeline",y)},E=()=>{C([...v,{year:"",title:"",description:""}])},x=y=>{const p=[...v];p.splice(y,1),C(p)},w=(y,p,R)=>{const I=[...v];I[y]={...I[y],[p]:R},C(I)},j=(y,p)=>{if(p===-1&&y===0||p===1&&y===v.length-1)return;const R=[...v],I=R[y];R[y]=R[y+p],R[y+p]=I,C(R)};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(ut,{className:"w-6 h-6 text-blue-600"})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Panduan Bagian Sejarah"}),o.jsxs("p",{className:"text-sm text-blue-800",children:["Bagian ini terdiri dari ",o.jsx("strong",{children:"Header Sejarah"})," (judul dan deskripsi umum) serta ",o.jsx("strong",{children:"Timeline Peristiwa"})," (kronologi peristiwa penting berdasarkan tahun)."]})]})]})}),o.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 space-y-6",children:[o.jsxs("div",{className:"border-b pb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx("span",{className:"bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"1"}),"Header Halaman Sejarah"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Bagian atas halaman sejarah yang akan ditampilkan kepada pengunjung"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["Judul Halaman ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:b.title||"",onChange:y=>S("title",y.target.value),className:"w-full rounded-xl border-gray-300 focus:ring-primary focus:border-primary",placeholder:"Contoh: Sejarah SMAN 1 Baleendah"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Judul besar yang muncul di bagian atas halaman sejarah"})]}),o.jsxs("div",{children:[o.jsx(Pn,{label:"Deskripsi / Pengantar Sejarah",initialValue:b.description_html||"",onChange:y=>S("description_html",y)}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tuliskan pengantar atau ringkasan umum tentang sejarah sekolah (1-2 paragraf). Detail kronologis akan ditambahkan di Timeline di bawah."})]})]})]}),o.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 space-y-4",children:[o.jsxs("div",{className:"border-b pb-3 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx("span",{className:"bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"2"}),"Timeline Peristiwa Sejarah"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Daftar peristiwa penting dalam perjalanan sekolah, diurutkan berdasarkan tahun"})]}),o.jsxs("button",{type:"button",onClick:E,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:[o.jsx(Te,{className:"w-4 h-4 mr-2"})," Tambah Peristiwa"]})]}),o.jsx("div",{className:"space-y-4",children:v.length===0?o.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[o.jsx(ut,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Belum ada timeline peristiwa"}),o.jsxs("button",{type:"button",onClick:E,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:[o.jsx(Te,{className:"w-4 h-4 mr-2"})," Tambah Peristiwa Pertama"]})]}):v.map((y,p)=>o.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-white p-6 rounded-xl border-2 border-gray-200 relative group hover:shadow-md transition-all",children:[o.jsx("div",{className:"absolute -left-4 top-8 bg-primary text-white rounded-full w-10 h-10 flex items-center justify-center text-sm font-bold shadow-lg",children:p+1}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 pl-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-700 uppercase mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Tahun Peristiwa"]}),o.jsx("input",{type:"number",min:"1900",max:new Date().getFullYear()+10,value:y.year,onChange:R=>w(p,"year",R.target.value),className:"w-full rounded-lg border-gray-300 focus:ring-primary focus:border-primary text-2xl font-bold text-primary",placeholder:"2024"}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Atau tuliskan "Sekarang" untuk tahun berjalan'})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-700 uppercase mb-2",children:"Judul Peristiwa"}),o.jsx("input",{type:"text",value:y.title,onChange:R=>w(p,"title",R.target.value),className:"w-full rounded-lg border-gray-300 focus:ring-primary focus:border-primary font-semibold text-lg",placeholder:"Contoh: Awal Pendirian Sekolah"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-xs font-bold text-gray-700 uppercase mb-2",children:"Deskripsi Peristiwa"}),o.jsx("textarea",{value:y.description,onChange:R=>w(p,"description",R.target.value),className:"w-full rounded-lg border-gray-300 focus:ring-primary focus:border-primary",rows:"5",placeholder:"Jelaskan detail peristiwa yang terjadi pada tahun ini..."})]})]}),o.jsxs("div",{className:"flex justify-end items-center gap-2 mt-4 pt-4 border-t",children:[o.jsxs("button",{type:"button",onClick:()=>j(p,-1),disabled:p===0,className:"px-3 py-2 text-sm text-gray-600 hover:text-primary hover:bg-gray-100 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-colors flex items-center gap-1",title:"Pindah ke atas",children:[o.jsx(Bn,{className:"w-4 h-4"}),o.jsx("span",{children:"Naik"})]}),o.jsxs("button",{type:"button",onClick:()=>j(p,1),disabled:p===v.length-1,className:"px-3 py-2 text-sm text-gray-600 hover:text-primary hover:bg-gray-100 rounded-lg disabled:opacity-30 disabled:cursor-not-allowed transition-colors flex items-center gap-1",title:"Pindah ke bawah",children:[o.jsx("span",{children:"Turun"}),o.jsx($n,{className:"w-4 h-4"})]}),o.jsx("div",{className:"flex-1"}),o.jsxs("button",{type:"button",onClick:()=>x(p),className:"px-4 py-2 text-sm text-white bg-red-500 hover:bg-red-600 rounded-lg transition-colors flex items-center gap-2",title:"Hapus peristiwa",children:[o.jsx(pt,{className:"w-4 h-4"}),o.jsx("span",{children:"Hapus"})]})]})]},p))})]})]})},N=()=>{const b=s.content||{},v=b.vision||"",C=Array.isArray(b.mission)?b.mission:[],E=(p,R)=>{const I=[...C];I[p]=R,S("mission",I)},x=p=>{S("mission",p)},w=()=>{S("mission",[...C,""])},j=p=>{const R=[...C];R.splice(p,1),S("mission",R)},y=p=>{const{active:R,over:I}=p;if(I&&R.id!==I.id){const B=C.findIndex((pe,P)=>`mission-${P}`===R.id),V=C.findIndex((pe,P)=>`mission-${P}`===I.id);B!==-1&&V!==-1&&x(kt(C,B,V))}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 space-y-4",children:[o.jsxs("div",{className:"border-b pb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx("span",{className:"bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"1"}),"Visi Sekolah"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Pernyataan visi atau cita-cita sekolah di masa depan"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:["Visi Sekolah ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{value:v,onChange:p=>S("vision",p.target.value),className:"w-full rounded-xl border-gray-300 focus:ring-primary focus:border-primary",rows:"3",placeholder:"Masukkan visi sekolah..."}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Tuliskan visi sekolah dengan jelas (1-2 paragraf)"})]})]}),o.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 space-y-4",children:[o.jsxs("div",{className:"border-b pb-3 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx("span",{className:"bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"2"}),"Misi Sekolah"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Daftar misi atau langkah untuk mencapai visi"})]}),o.jsxs("button",{type:"button",onClick:w,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:[o.jsx(Te,{className:"w-4 h-4 mr-2"})," Tambah Misi"]})]}),o.jsx("div",{className:"space-y-3",children:C.length>0?o.jsx(ss,{sensors:h,collisionDetection:sr,onDragEnd:y,children:o.jsx(bs,{items:C.map((p,R)=>`mission-${R}`),strategy:ps,children:C.map((p,R)=>o.jsx(ks,{id:`mission-${R}`,value:p,index:R,onUpdate:E,onRemove:j},`mission-${R}`))})}):o.jsx("p",{className:"text-gray-400 text-sm text-center py-4",children:'Belum ada misi. Klik tombol "Tambah Misi" untuk menambahkan.'})}),o.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Seret untuk mengubah urutan misi"})]})]})},k=()=>{const b=s.content||{},v=Array.isArray(b.items)?b.items:[],C=j=>{S("items",j)},E=()=>{C([...v,{title:"",image_url:""}])},x=j=>{const y=[...v];y.splice(j,1),C(y)},w=(j,y,p)=>{const R=v.map((I,B)=>{if(B!==j)return I;const V={title:I.title||I.name||"",image_url:I.image_url||I.image||"",image_file:I.image_file};return V[y]=p,V});C(R)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"md:col-span-2 space-y-4 bg-white border-2 border-gray-200 rounded-xl p-6",children:[o.jsxs("div",{className:"border-b pb-3 mb-4",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx("span",{className:"bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"1"}),"Informasi Umum Fasilitas"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Informasi umum tentang fasilitas sekolah"})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Judul Fasilitas"}),o.jsx("input",{type:"text",value:b.title||"",onChange:j=>S("title",j.target.value),className:"w-full rounded-xl border-gray-300 focus:ring-primary focus:border-primary"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Deskripsi Fasilitas"}),o.jsx("textarea",{value:b.description||"",onChange:j=>S("description",j.target.value),className:"w-full rounded-xl border-gray-300 focus:ring-primary focus:border-primary",rows:"2"})]})]})]}),o.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 space-y-4",children:[o.jsxs("div",{className:"border-b pb-3 flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx("span",{className:"bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"2"}),"Daftar Fasilitas"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Kelola fasilitas-fasilitas yang tersedia di sekolah"})]}),o.jsxs("button",{type:"button",onClick:E,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:[o.jsx(Te,{className:"w-4 h-4 mr-2"})," Tambah Fasilitas"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.length===0?o.jsxs("div",{className:"md:col-span-2 text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[o.jsx($t,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),o.jsx("p",{className:"text-gray-500 mb-4",children:"Belum ada fasilitas"}),o.jsxs("button",{type:"button",onClick:E,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium",children:[o.jsx(Te,{className:"w-4 h-4 mr-2"})," Tambah Fasilitas Pertama"]})]}):v.map((j,y)=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -left-4 top-4 bg-primary text-white rounded-full w-10 h-10 flex items-center justify-center text-sm font-bold shadow-lg z-10",children:y+1}),o.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-white p-5 rounded-xl border-2 border-gray-200 relative group hover:shadow-md transition-all pl-10",children:[o.jsx("button",{type:"button",onClick:()=>x(y),className:"absolute top-3 right-3 bg-red-500 text-white p-1.5 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity z-10 hover:bg-red-600",title:"Hapus fasilitas",children:o.jsx(pt,{className:"w-4 h-4"})}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-700 uppercase mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Nama Fasilitas"]}),o.jsx("input",{type:"text",value:j.title||j.name||"",onChange:p=>w(y,"title",p.target.value),className:"w-full rounded-lg border-gray-300 focus:ring-primary focus:border-primary font-semibold",placeholder:"Contoh: Laboratorium Komputer"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-700 uppercase mb-2 flex items-center gap-1",children:[o.jsx("span",{children:""})," Foto Fasilitas"]}),o.jsx(zt,{id:`facility-image-${y}`,label:"",previewUrl:Bt(j.image?.original_url||j.image_url||j.image),onChange:p=>w(y,"image_file",p)}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Upload foto fasilitas untuk ditampilkan di galeri profil sekolah."})]})]})]})]},y))})]})]})},M=()=>{const b=s.content||{};return o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white border-2 border-gray-200 rounded-xl p-6 space-y-4",children:[o.jsxs("div",{className:"border-b pb-3",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-900 flex items-center gap-2",children:[o.jsx("span",{className:"bg-primary text-white rounded-full w-6 h-6 flex items-center justify-center text-sm",children:"1"}),"Gambar Bagan Struktur"]}),o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Upload gambar bagan organisasi sekolah"})]}),o.jsx(zt,{id:"organization-image",label:"",previewUrl:Bt(b.image_url),onChange:v=>S("image",v)}),o.jsx("p",{className:"text-sm text-gray-500",children:"Gambar bagan struktur organisasi sekolah. Gunakan resolusi tinggi (minimal 1200px lebar) agar teks pada bagan tetap terbaca jelas saat diperbesar oleh pengunjung."})]})})};return o.jsx(Ln,{headerTitle:"Konten Profil Sekolah",headTitle:"Konten Profil Sekolah",tabs:f,activeTab:r,setActiveTab:m,processing:u,onSave:g,errors:d,children:o.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-sm border border-gray-100",children:[r==="history"&&D(),r==="vision_mission"&&N(),r==="facilities"&&k(),r==="organization"&&M()]})})}export{Ks as default};
