import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{q as b,r as i,J as a,f as d}from"./inertia-vendor-CFsdYvsV.js";import{P as x}from"./PrimaryButton-BP4GzKQS.js";import{C as y}from"./ContentManagementPage-DVU9nbB8.js";import{z as l}from"./app-BjrorLXI.js";import{Q as f,F as c,ar as j,P as N,T as k,e as v}from"./ui-vendor-DKvpuSCb.js";import"./react-vendor-X_fu8xpB.js";import"./typography-ChUjANkt.js";import"./AdminLayout-BGv0ni_W.js";import"./transition-CiB-21bZ.js";function E({documents:t}){const{success:w}=b().props,[m,o]=i.useState("list"),[r,n]=i.useState(null),p=[{key:"list",label:"RAG Documents",description:"Kelola dokumen knowledge base untuk AI chatbot.",icon:f}],u=s=>{confirm("Apakah Anda yakin ingin memproses ulang embeddings untuk dokumen ini? Proses ini mungkin memakan waktu beberapa menit.")&&(n(s),l.loading("Memproses embeddings... Ini mungkin memakan waktu beberapa menit.",{duration:5e3}),d.post(route("admin.rag-documents.reprocess",s),{},{preserveScroll:!0,onFinish:()=>n(null),onSuccess:()=>l.success("Dokumen berhasil diproses ulang! Embeddings sudah diperbarui."),onError:()=>{l.error("Gagal memproses dokumen. Periksa konfigurasi AI atau coba lagi.")}}))},h=s=>{confirm("Apakah Anda yakin ingin menghapus dokumen ini? Semua chunks dan embeddings akan dihapus dan tidak dapat dipulihkan.")&&d.delete(route("admin.rag-documents.destroy",s),{preserveScroll:!0,onSuccess:()=>l.success("Dokumen berhasil dihapus")})};return e.jsxs(y,{headerTitle:"RAG Documents",headTitle:"RAG Documents",tabs:p,activeTab:m,setActiveTab:o,extraHeader:e.jsx("div",{className:"flex justify-end",children:e.jsx(a,{href:route("admin.rag-documents.create"),children:e.jsxs(x,{className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 flex items-center gap-2 px-4 py-2 text-sm sm:text-base",children:[e.jsx(v,{size:18}),"Tambah Dokumen"]})})}),children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:t.data&&t.data.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Judul"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase hidden md:table-cell",children:"Kategori"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase hidden lg:table-cell",children:"Source"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Chunks"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Progress"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-500 uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:t.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(c,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900 text-sm truncate max-w-[200px]",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.created_at).toLocaleDateString("id-ID")})]})]})}),e.jsx("td",{className:"px-4 py-3 hidden md:table-cell",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700",children:s.category||"Umum"})}),e.jsx("td",{className:"px-4 py-3 hidden lg:table-cell",children:e.jsx("span",{className:"text-xs text-gray-600",children:s.source||"manual"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:s.chunks_count||0})}),e.jsx("td",{className:"px-4 py-3",children:s.is_processed?e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:"Selesai"}):e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700 animate-pulse",children:"Memproses..."})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${s.is_active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:s.is_active?"Aktif":"Nonaktif"})}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>u(s.id),disabled:r===s.id,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg disabled:opacity-50",title:"Reprocess Embeddings",children:e.jsx(j,{size:16,className:r===s.id?"animate-spin":""})}),e.jsx(a,{href:route("admin.rag-documents.edit",s.id),className:"p-2 !text-accent-yellow hover:bg-accent-yellow/10 rounded-lg",children:e.jsx(N,{size:16})}),e.jsx("button",{onClick:()=>h(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(k,{size:16})})]})})]},s.id))})]})}):e.jsxs("div",{className:"p-8 sm:p-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(c,{size:24,className:"sm:w-8 sm:h-8 text-gray-400"})}),e.jsx("p",{className:"text-gray-500 font-medium mb-4 text-sm sm:text-base",children:"Belum ada dokumen RAG"}),e.jsx(a,{href:route("admin.rag-documents.create"),children:e.jsx(x,{className:"!bg-accent-yellow !text-gray-900 hover:!bg-yellow-500 text-sm sm:text-base px-4 py-2",children:"Tambah Dokumen"})})]})}),t.links&&t.links.length>3&&e.jsx("div",{className:"mt-4 flex justify-center gap-2",children:t.links.map((s,g)=>e.jsx(a,{href:s.url||"#",className:`px-3 py-1 rounded-lg text-sm ${s.active?"bg-accent-yellow text-gray-900 font-bold":s.url?"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},g))})]})}export{E as default};
