import{j as e}from"./markdown-vendor-CIGiOj7E.js";import{r as c}from"./inertia-vendor-CFsdYvsV.js";import{aA as x,aB as b,aC as p,aD as h,aE as f,aF as j}from"./ui-vendor-DKvpuSCb.js";const w=i=>{if(!i)return"";const r=new DOMParser().parseFromString(i,"text/html");return r.body.querySelectorAll("*").forEach(t=>{t.removeAttribute("style"),t.removeAttribute("class")}),r.body.querySelectorAll("script, style, link, meta").forEach(t=>t.remove()),r.body.innerHTML},g=({value:i,initialValue:r="",onChange:t,label:d,error:u})=>{const s=c.useRef(null),l=c.useRef(!1);c.useEffect(()=>{const o=i??r;s.current&&s.current.innerHTML!==o&&(l.current||(s.current.innerHTML=o||"")),l.current=!1},[i,r]);const a=()=>{if(s.current){const o=s.current.innerHTML;l.current=!0,t&&t(w(o))}},n=(o,m=null)=>{document.execCommand(o,!1,m),s.current.focus(),a()};return e.jsxs("div",{className:"mb-4",children:[d&&e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1.5 ml-1",children:d}),e.jsxs("div",{className:"border border-slate-200 rounded-xl shadow-sm overflow-hidden focus-within:ring-2 focus-within:ring-primary/20 focus-within:border-primary transition-all bg-white",children:[e.jsxs("div",{className:"flex items-center p-2 border-b bg-slate-50/50 space-x-1",children:[e.jsx("button",{type:"button",onClick:()=>n("undo"),title:"Undo (Ctrl+Z)",className:"p-1.5 hover:bg-slate-200 rounded text-slate-600 transition-colors",children:e.jsx(x,{size:16})}),e.jsx("button",{type:"button",onClick:()=>n("redo"),title:"Redo (Ctrl+Y)",className:"p-1.5 hover:bg-slate-200 rounded text-slate-600 transition-colors mr-2",children:e.jsx(b,{size:16})}),e.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),e.jsx("button",{type:"button",onClick:()=>n("bold"),title:"Bold",className:"p-1.5 hover:bg-slate-200 rounded text-slate-700 font-bold transition-colors",children:e.jsx(p,{size:16})}),e.jsx("button",{type:"button",onClick:()=>n("italic"),title:"Italic",className:"p-1.5 hover:bg-slate-200 rounded text-slate-700 italic transition-colors",children:e.jsx(h,{size:16})}),e.jsx("div",{className:"w-px h-4 bg-slate-300 mx-1"}),e.jsx("button",{type:"button",onClick:()=>n("insertUnorderedList"),title:"Bullet List",className:"p-1.5 hover:bg-slate-200 rounded text-slate-700 transition-colors",children:e.jsx(f,{size:16})}),e.jsx("button",{type:"button",onClick:()=>n("insertOrderedList"),title:"Numbered List",className:"p-1.5 hover:bg-slate-200 rounded text-slate-700 transition-colors",children:e.jsx(j,{size:16})})]}),e.jsx("div",{ref:s,contentEditable:!0,onInput:a,onBlur:a,className:"block w-full p-4 min-h-[180px] prose prose-sm max-w-none focus:outline-none",style:{whiteSpace:"pre-wrap",wordWrap:"break-word"}})]}),u&&e.jsx("p",{className:"mt-1.5 text-xs text-red-600 ml-1",children:u})]})};export{g as M};
