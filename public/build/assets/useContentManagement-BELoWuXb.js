import{q as j,S as k,r as o,f as I}from"./inertia-vendor-CFsdYvsV.js";import{z as m}from"./app-BjrorLXI.js";function B(d,p,F="post"){const{success:g,errors:c}=j().props,{data:G,setData:h,post:v,put:w,processing:P,errors:C,reset:$,transform:x}=k(d),[z,u]=o.useState({}),[L,S]=o.useState({}),[U,f]=o.useState(null),[b,t]=o.useState({});return o.useEffect(()=>{if(g){f(g);const e=setTimeout(()=>f(null),5e3);return()=>clearTimeout(e)}},[g]),o.useEffect(()=>{c&&Object.keys(c).length>0?t(c):t({})},[c]),{data:G,setData:h,processing:P,formErrors:C,localSuccess:U,localErrors:b,setLocalErrors:t,selectedFiles:z,setSelectedFiles:u,previewUrls:L,setPreviewUrls:S,handleFileChange:(e,r,a={})=>{if(r){const{maxSize:s=10*1024*1024,allowedTypes:l=["image/jpeg","image/png","image/jpg","image/gif","image/svg+xml"]}=a;if(r.size>s){t(n=>({...n,[e]:`Ukuran file tidak boleh lebih dari ${s/(1024*1024)}MB`}));return}if(!l.includes(r.type)){t(n=>({...n,[e]:"File harus berupa gambar (JPEG, PNG, JPG, GIF, SVG)"}));return}t(n=>{const i={...n};return delete i[e],i}),u(n=>({...n,[e]:r}));const E=new FileReader;E.onload=n=>{S(i=>({...i,[e]:n.target.result}))},E.readAsDataURL(r)}},handleSectionInputChange:(e,r,a)=>{h(s=>({...s,[e]:{...s[e],[r]:a}})),b[`${e}.${r}`]&&t(s=>{const l={...s};return delete l[`${e}.${r}`],l})},handleSubmit:(e,r=null)=>{if(e&&e.preventDefault(),t({}),r instanceof FormData){I.post(p,r,{preserveScroll:!0,onSuccess:()=>{u({}),m.success("Perubahan berhasil disimpan")},onError:s=>{t(s),m.error("Gagal menyimpan perubahan")}});return}r&&x(s=>({...s,...r}));const a={preserveScroll:!0,onSuccess:()=>{u({}),m.success("Perubahan berhasil disimpan")},onError:s=>{t(s),m.error("Gagal menyimpan perubahan")}};F==="post"?v(p,a):w(p,a)},reset:$}}export{B as u};
